"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[398],{6398:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var r=t(9950),l=t(3464),a=t(33),c=t(8170),o=t(2053),n=t(9739),d=t(226),i=t(5336),u=t(300),x=t(1032),m=t(4414);const h=e=>{let{label:s,isActive:t,onClick:r}=e;return(0,m.jsx)("button",{className:"pb-1 ".concat(t?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"),onClick:r,children:s})};var g=t(1320),p=t(2235),b=t(5769),j=t(9780),y=t(9213),f=t(1671),N=t(4075),v=t(2825),w=t(9818);const A=()=>{const[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(1),{currentUser:a,userLoggedIn:c}=(0,x.A)(),n=c&&a?a.uid:null;(0,r.useEffect)((()=>{n&&(0,i.Et)(n).then((e=>{s(e),console.log(e)})).catch((e=>{console.error("Error fetching orders:",e)}))}),[n]);const d=Array.isArray(e)?e.slice(10*(t-1),10*t):[];return(0,m.jsxs)("div",{className:"",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(o.A,{variant:"h2",gutterBottom:!0,className:"font-bold text-xl",children:"Recent Orders"}),(0,m.jsx)(g.A,{component:p.A,sx:{marginTop:4,overflowX:"auto"},children:(0,m.jsxs)(b.A,{"aria-label":"responsive table",children:[(0,m.jsx)(j.A,{className:"bg-gray-200",children:(0,m.jsxs)(y.A,{children:[(0,m.jsx)(f.A,{children:"Buyer Name"}),(0,m.jsx)(f.A,{children:"Buyer Phone"}),(0,m.jsx)(f.A,{children:"Date"}),(0,m.jsx)(f.A,{children:"Product"}),(0,m.jsx)(f.A,{children:"Amount"}),(0,m.jsx)(f.A,{children:"Quantity"}),(0,m.jsx)(f.A,{children:"Payment Status"}),(0,m.jsx)(f.A,{children:"Delivery Option"}),(0,m.jsx)(f.A,{children:"Action"})]})}),(0,m.jsx)(N.A,{children:d.length>0?d.map(((e,s)=>(0,m.jsxs)(y.A,{children:[(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderBuyerName}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderBuyerPhoneNumber}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderDate}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderProductName}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderTotalPrice}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderQuantity}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderPaymentStatus}),(0,m.jsx)(f.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.OrderDeliveryOption}),(0,m.jsx)(f.A,{children:(0,m.jsx)("button",{className:"bg-blue-500 text-white px-2 py-1 rounded",children:"View"})})]},s))):(0,m.jsx)(y.A,{children:(0,m.jsx)(f.A,{colSpan:5,children:(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center mt-10",children:[(0,m.jsx)(w.A,{className:"h-10",style:{color:"gray"}}),(0,m.jsx)("p",{className:"font-bold text-lg",children:"You've no financial history"}),(0,m.jsx)(o.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no records of payment. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})})})]})})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,m.jsx)("button",{className:"bg-gray-200 text-gray-700 py-2 px-4 rounded",onClick:()=>l(t-1),disabled:1===t,children:"Previous"}),(0,m.jsx)("div",{className:"flex space-x-2",children:(0,m.jsx)(v.A,{count:Math.ceil(e.length/10),page:t,onChange:(e,s)=>{l(s)},color:"primary"})}),(0,m.jsx)("button",{className:"bg-gray-200 text-gray-700 py-2 px-4 rounded",onClick:()=>l(t+1),disabled:t===Math.ceil(e.length/10),children:"Next"})]})]})};var k=t(2628);const C=e=>{let{categories:s}=e;const[t,l]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[o,n]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[f,N]=(0,r.useState)(!1),{currentUser:v,userLoggedIn:w}=(0,x.A)(),A=w&&v?v.uid:null;return(0,m.jsxs)("form",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-70",children:"Select Category"}),(0,m.jsx)("select",{value:t,onChange:e=>l(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:s.map(((e,s)=>(0,m.jsx)("option",{value:e,children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 rounded-full bg-".concat(s%3===0?"blue":s%3===1?"green":"yellow","-500")}),(0,m.jsx)("span",{children:e})]})},s)))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-7000",children:"Product Location"}),(0,m.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,m.jsx)("input",{type:"text",value:a,onChange:e=>c(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Price"}),(0,m.jsx)("input",{type:"number",value:o,onChange:e=>n(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),(0,m.jsx)("input",{type:"number",value:h,onChange:e=>g(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Product Image"}),(0,m.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files[0];b(s),y(URL.createObjectURL(s))},className:"mt-1 block w-full text-sm text-gray-500"}),j&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("img",{src:j,alt:"Product Preview",className:"w-36 h-36 object-cover"})})]}),(0,m.jsx)("div",{className:"w-full",children:(0,m.jsx)("button",{type:"button",onClick:async()=>{if(t&&a&&o&&h&&p&&d)try{N(!0);const e=await(0,i.iG)(p),s={userId:A,category:t,productName:a,productPrice:o,productLocation:d,quantity:h,image:e};await(0,i.k2)(s).then((()=>{alert("Product added successfully")})).catch((e=>{console.error("Error adding product:",e),alert("Error adding product")})),c(""),n(""),u(""),g(""),b(null),y(null)}catch(e){console.error("Error adding product:",e),alert("Error adding product")}finally{N(!1)}else alert("Please fill in all fields and upload an image.")},className:"w-full py-2 px-4 bg-violet-600 text-white rounded-md shadow-sm hover:bg-yellow-600",children:f?"Adding Product...":"Add Product"})})]})},P=e=>{let{userId:s}=e;const[t,x]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),f=((0,u.wA)(),e=>{g(!1),(async e=>{try{b(!0),await(0,i.TZ)(e),x(t.filter((s=>s.id!==e))),y(!j)}catch(s){console.error("Error deleting product:",s)}finally{b(!1)}})(e)});return(0,r.useEffect)((()=>{s&&(async()=>{try{const e=await(0,i.LR)(s);x(e)}catch(e){console.error("Error fetching products:",e)}})()}),[s,j]),(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Added Products"}),(0,m.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Tap the X button to remove products"}),t.map(((e,s)=>(0,m.jsxs)("div",{className:"relative flex mb-4 border rounded-md shadow-sm",children:[(0,m.jsx)("img",{src:e.image,alt:e.productName,className:"w-36 h-36 object-cover"}),(0,m.jsxs)("div",{className:"flex flex-col p-4 truncate",children:[(0,m.jsx)("h3",{className:"text-lg font-medium truncate",children:e.productName}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["GHC ",e.productPrice]}),(0,m.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.productLocation}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["Q: ",e.quantity]})]}),(0,m.jsx)("button",{type:"button",onClick:()=>{g(!0)},className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:(0,m.jsx)(k.A,{className:"h-7 w-7"})}),(0,m.jsxs)(l.A,{className:"rounded-[20px]",open:h,onClose:()=>g(!1),children:[(0,m.jsx)(a.A,{className:"font-bold text-sm",children:"Are you sure you want to delete this product ?"}),(0,m.jsx)(c.A,{children:(0,m.jsx)(o.A,{className:"text-gray-500 text-sm",children:"Click the Confirm button to delete this product."})}),(0,m.jsxs)(n.A,{children:[(0,m.jsx)(d.A,{onClick:()=>g(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,m.jsx)(d.A,{onClick:()=>f(e.id),disabled:p,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:p?"Please wait...":"Confirm"})]})]})]},s)))]})},S=()=>{const[e,s]=(0,r.useState)([]),{currentUser:t,userLoggedIn:l}=(0,x.A)(),a=l&&t?t.uid:null;return(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,i.wV)();s(e)}catch(e){console.error("Error fetching categories:",e)}})()}),[]),(0,m.jsx)("div",{className:"container mx-auto mt-4 mb-4",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)("div",{className:"md:col-span-2 shadow-xl",children:(0,m.jsx)("div",{className:"p-4 bg-white rounded-md shadow-sm",children:(0,m.jsx)(C,{categories:e})})}),(0,m.jsx)("div",{className:"md:col-span-1 shadow-xl",children:(0,m.jsx)("div",{className:"p-4 bg-white rounded-md shadow-sm",children:(0,m.jsx)(P,{userId:a})})})]})})};var E=t(6491);const O={backgroundColor:"white",padding:"40px",margin:"8px 0",borderRadius:"10px"},L=()=>{const{currentUser:e,userLoggedIn:s}=(0,x.A)(),t=s&&e?e.uid:null,[l,a]=(0,r.useState)([]),[c,n]=(0,r.useState)([]);(0,r.useEffect)((()=>{t&&(0,i.Et)(t).then((e=>{a(e),console.log(e)})).catch((e=>{console.error("Error fetching orders:",e)}))}),[t]),(0,r.useEffect)((()=>{t&&(0,i.LR)(t).then((e=>{n(e),console.log(e)})).catch((e=>{console.error("Error fetching products:",e)}))}),[t]);const d=l.length,u=c.length,h=l.filter((e=>"complete"===e.OrderPaymentStatus)),g=h.length,p=g>0?h.reduce(((e,s)=>e+parseFloat(s.OrderTotalPrice||0)),0):0;return(0,m.jsx)("div",{className:"",children:(0,m.jsxs)("div",{children:[(0,m.jsx)(o.A,{variant:"h2",gutterBottom:!0,className:"font-bold text-xl",children:"Summary"}),(0,m.jsxs)(E.A,{className:"flex flex-wrap -mx-2",children:[(0,m.jsxs)(E.A,{className:"shadow-xl shadow-black-600 w-full md:w-1/5 px-2 mb-4 mr-5",sx:{...O},children:[(0,m.jsx)("p",{className:"mb-2",children:"Total Orders"}),(0,m.jsx)("p",{className:"mb-2 font-bold",children:d}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,m.jsx)("span",{className:"text-blue-700",children:"Approved"})," orders"]})]}),(0,m.jsxs)(E.A,{className:"shadow-xl shadow-black-600 w-full md:w-3/5 px-2 mb-4",sx:{...O},children:[(0,m.jsx)("p",{className:"mb-2",children:"Completed Orders"}),(0,m.jsx)("p",{className:"mb-2 font-bold",children:g}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["Audited and ",(0,m.jsx)("span",{className:"text-blue-700",children:"paid"})," orders"]})]}),(0,m.jsxs)(E.A,{className:"shadow-xl shadow-black-600 w-full md:w-1/5 px-2 mb-4 mr-5",sx:{...O},children:[(0,m.jsx)("p",{className:"mb-2",children:"Total Products Added"}),(0,m.jsx)("p",{className:"text-xl text-gray-50",children:(0,m.jsx)("span",{className:"text-green-500",children:u})})]}),(0,m.jsxs)(E.A,{className:"shadow-xl shadow-black-600 w-full md:w-3/5 px-2 mb-4",sx:{...O},children:[(0,m.jsx)("p",{className:"mb-2",children:"Total Revenue"}),(0,m.jsx)("p",{className:"text-xl text-gray-50",children:(0,m.jsxs)("span",{className:"text-green-500",children:["GHC ",p.toFixed(2)]})})]})]})]})})},I=()=>{const e=(0,u.wA)(),[s,t]=(0,r.useState)(!1),{currentUser:g,userLoggedIn:p}=(0,x.A)(),b=p&&g?g.uid:null;(0,r.useEffect)((()=>{(0,i.VL)(b).then((e=>{t(e.seller)})),console.log(s)}),[e,b,s]);const[j,y]=(0,r.useState)(!1),[f,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)("Purchases");return(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center p-0 md:p-1",children:[!s&&(0,m.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 max-w-sm text-center",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Become A Seller"}),(0,m.jsx)("p",{className:"text-gray-600 mb-4",children:"Register as a seller also and start selling your products for profit"}),(0,m.jsx)("button",{className:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700",onClick:()=>{y(!0)},children:"Become A Seller"})]}),s&&(0,m.jsxs)("div",{className:"w-full p-4",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-4 mb-6",children:[(0,m.jsx)(h,{label:"Purchases",isActive:"Purchases"===v,onClick:()=>w("Purchases")}),(0,m.jsx)(h,{label:"Products",isActive:"Products"===v,onClick:()=>w("Products")}),(0,m.jsx)(h,{label:"Summary",isActive:"Summary"===v,onClick:()=>w("Summary")})]}),(()=>{switch(v){case"Purchases":return(0,m.jsx)(A,{});case"Products":return(0,m.jsx)(S,{});case"Summary":return(0,m.jsx)(L,{});default:return null}})()]}),(0,m.jsxs)(l.A,{className:"rounded-[20px]",open:j,onClose:()=>y(!1),children:[(0,m.jsx)(a.A,{className:"font-bold text-sm",children:"Are you sure you want to become a seller ?"}),(0,m.jsx)(c.A,{children:(0,m.jsx)(o.A,{className:"text-gray-500 text-sm",children:"Click the Confirm button to start putting your products for sale\ud83c\udf8a."})}),(0,m.jsxs)(n.A,{children:[(0,m.jsx)(d.A,{onClick:()=>y(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,m.jsx)(d.A,{onClick:async s=>{y(!1),N(!0),s.preventDefault();try{e((0,i.Rv)(b)),alert("You have successfully become a seller!")}catch(t){console.error("Error becoming a seller:",t),alert("Error becoming a seller, try again...")}finally{N(!1)}},disabled:f,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:f?"Please wait...":"Confirm"})]})]})]})}}}]);