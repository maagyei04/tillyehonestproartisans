"use strict";(self.webpackChunkabesjobconsult=self.webpackChunkabesjobconsult||[]).push([[463],{5463:(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var a=t(9950),l=t(6491),i=t(899),n=t(2053),r=t(1413),o=t(8437),c=t(4142),d=t(4745),m=t(146),x=t(1959),h=t(5195),j=t(4414);const p=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1),[i,n]=(0,a.useState)({bookingEstimateAmount:""});return 0===s.bookingEstimateAmount?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Create Estimate"}),(0,j.jsxs)("form",{onSubmit:async e=>{l(!0),e.preventDefault();try{await(0,h.Ld)(s.id,i.bookingEstimateAmount),alert("Appointment Estimate updated successfully")}catch(t){console.error("Error updating appointment estimate:",t),alert("Error updating appointment estimate")}finally{l(!1)}},children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Appointment Total Estimate"}),(0,j.jsx)("input",{type:"tel",name:"bookingEstimateAmount",value:i.bookingEstimateAmount,onChange:e=>{const{name:s,value:t}=e.target;n((e=>({...e,[s]:t})))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,j.jsx)("div",{children:(0,j.jsxs)("button",{disabled:t,type:"submit",className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Create Estimate",t&&"Please wait..."]})})]}),(0,j.jsxs)("div",{className:"flex flex-col mt-5",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Kindly go through the estimate thoroughly, please refresh page after creating estimate"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Estimate cannot be edited after sending"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Estimate will be forwarded to client immediately after creation"})]})]})]})}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-lg font-bold",children:"Created Estimate"}),(0,j.jsx)("h1",{className:"mb-2 text-sm font-semibold mb-5",children:"Esimated Budget"}),(0,j.jsxs)("div",{className:"mb-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Total Amount"}),(0,j.jsxs)("p",{children:["GHC ",s.bookingEstimateAmount,".00"]})]}),(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"You\u2019ll receive part of the budget before your work starts"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"You\u2019ll be paid fully once you complete your work"})]})]})]})})},b=e=>{let{bookingData:s}=e;return"complete"!==s.bookingPayment?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,j.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,j.jsx)("p",{children:""===s.bookingPayment?"No Payment":"half"===s.bookingPayment?"Half Payment":""})}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,j.jsx)("p",{children:0===s.bookingEstimateAmount?"Create Estimate in previous page":"GHC "+s.bookingEstimateAmount+".00"})]}),(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"You\u2019ll receive part of the budget before your work starts"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"You\u2019ll be paid fully once you complete your work"})]})]})]})}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Payment Information"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,j.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,j.jsx)("p",{children:"complete"===s.bookingPayment?"Full Payment":""})}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,j.jsx)("p",{children:s.bookingEstimateAmount})]}),(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Check your payment account to confirm the total payment"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Your appointment has been successfully completed"})]})]})]})})};var g=t(3464),u=t(33),f=t(8170),N=t(9739),y=t(226);const v=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1),[i,r]=(0,a.useState)(!1),o=async e=>{l(!1),r(!0),e.preventDefault();try{await(0,h.h4)(s.id,"complete"),alert("Booking has been marked as completed!")}catch(t){console.error("Error marking booking as completed:",t),alert("Error marking booking as completed:")}finally{r(!1)}};return(0,j.jsxs)(j.Fragment,{children:["complete"===s.bookingStatusArtisan&&"complete"===s.bookingStatusClient&&(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Appointment Completion"}),(0,j.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,j.jsx)("p",{children:"Client has approved your work!"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"mb-1 font-bold text-gray-500 text-sm",children:"Client Rating"}),(0,j.jsxs)("p",{children:[s.bookingRate," stars"]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"mb-1 font-bold text-gray-500 text-sm",children:"Client Review"}),(0,j.jsx)("p",{children:s.bookingReview})]})]}),"complete"===s.bookingStatusArtisan&&""===s.bookingStatusClient&&(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Appointment Completion"}),(0,j.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,j.jsx)("p",{children:"Waiting for confirmation from client"})}),(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"A message will be sent to the client to confirm the completion of your appointment."})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Your client will rate you based on your performance"})]})]})]}),""===s.bookingStatusArtisan&&(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Appointment Completion"}),(0,j.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,j.jsx)("p",{children:"complete"===s.bookingStatusClient?"Client has marked the work as complete, waiting for your confirmation":""})}),(0,j.jsxs)("div",{className:"flex flex-col mb-5",children:[(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"Click on this button once you complete the service for your client, remember to refresh the page after that"})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsx)(x.A,{className:"w-5 mr-5"}),(0,j.jsx)("p",{className:"text-gray-500 text-sm",children:"You will receive full payments once your client and you verifies work is done."})]})]}),(0,j.jsx)("button",{className:"w-full btn bg-violet-600 text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",type:"button",onClick:()=>{l(!0)},children:"Service Completed"})]}),(0,j.jsxs)(g.A,{className:"rounded-[20px]",open:t,onClose:o,children:[(0,j.jsx)(u.A,{className:"font-bold text-sm",children:"Are you sure you want to mark this service as completed?"}),(0,j.jsx)(f.A,{children:(0,j.jsx)(n.A,{className:"text-gray-500 text-sm",children:"This is the final stage of the appointment. Thank you for using our platform \ud83c\udf8a"})}),(0,j.jsxs)(N.A,{children:[(0,j.jsx)(y.A,{onClick:o,className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,j.jsx)(y.A,{onClick:o,disabled:i,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:i?"please waait...":"Confirm"})]})]})]})};var w=t(1032),k=t(9818);const A=(0,m.A)(l.A)({backgroundColor:"#f9f9f9",padding:"8px",borderRight:"1px solid #ddd",height:"auto"}),C=(0,m.A)(l.A)({padding:"5px",height:"100vh",overflowY:"auto"});function E(){const{userLoggedIn:e,currentUser:s}=(0,w.A)(),[t,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(0),[u,f]=(0,a.useState)([]),[N,y]=(0,a.useState)({}),[E,S]=(0,a.useState)({});(0,a.useEffect)((()=>{(async()=>{if(e&&null!==s&&void 0!==s&&s.uid){const e=await(0,h.g6)(s.uid);f(e),console.log(e)}})()}),[e,s]);return(0,a.useEffect)((()=>{(async()=>{const e={};for(const s of u)if(!e[s.bookingClientId]){const t=await(0,h.Se)(s.bookingClientId);e[s.bookingClientId]=t.firstName}y(e)})()}),[u]),(0,j.jsxs)(i.Ay,{container:!0,children:[(0,j.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,j.jsxs)(A,{children:[(0,j.jsx)(n.A,{className:"text-lg font-bold",gutterBottom:!0,children:"Active Appointments"}),(0,j.jsx)("input",{className:"bg-white rounded-[10px] shadow shadow-lg w-full p-1 mb-5",placeholder:"Search Appointments..."}),(0,j.jsx)("div",{children:u.length>0?u.map(((e,s)=>(0,j.jsx)("div",{button:!0,onClick:()=>(e=>{m(e)})(e),selected:t===e,sx:{mb:2},children:(0,j.jsxs)("div",{className:"".concat(t===e?"border border-violet-600":"border border-gray-200"," flex flex-col mb-2 p-4 shadow shadow-lg rounded-[10px] bg-white"),children:[(0,j.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,j.jsxs)("div",{className:"flex flex-row items-cente",children:[(0,j.jsx)(r.A,{className:"h-5 w-5 mr-2"}),(0,j.jsx)("p",{className:"text-sm",children:N[e.bookingClientId]})]}),(0,j.jsx)("div",{className:"".concat(0===e.bookingEstimateAmount?"bg-red-100 text-red-600":"bg-gray-200 text-green-500"," px-4 rounded-[10px]"),children:0===e.bookingEstimateAmount?"Pending":"Estimate Done"})]}),(0,j.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Job Description"}),e.bookingServiceDetail]}),(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Expected Date"}),e.bookingStartDate]})]})]})},s))):(0,j.jsxs)(l.A,{className:"flex flex-col items-center justify-center mt-10",children:[(0,j.jsx)(k.A,{className:"h-20",style:{color:"gray"}}),(0,j.jsx)("p",{className:"font-bold text-lg",children:"You\u2019ve not been booked yet"}),(0,j.jsx)(n.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no booked appointments for you. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})]})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,md:8,children:(0,j.jsx)(C,{children:t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex flex-row items-center",children:[(0,j.jsx)(n.A,{className:"text-sm font-bold mr-2",gutterBottom:!0,children:"Appointment Details"}),(0,j.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px]",children:(0,j.jsx)("p",{children:0===t.bookingEstimateAmount?"Waiting for estimate":"Estimate Done"})})]}),(0,j.jsxs)(o.A,{value:x,onChange:(e,s)=>{g(s)},children:[(0,j.jsx)(c.A,{label:"General"}),(0,j.jsx)(c.A,{label:"Estimate"}),(0,j.jsx)(c.A,{label:"Payment"}),(0,j.jsx)(c.A,{label:"Completion"})]}),(0,j.jsxs)(l.A,{p:2,children:[0===x&&(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,j.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:"Client Information"}),(0,j.jsxs)("div",{className:"flex flex-row",children:[(0,j.jsx)("div",{className:"mr-2",children:(0,j.jsx)(r.A,{className:"h-10 w-10 mr-2",src:t.avatar})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm",children:N[t.bookingClientId]}),(0,j.jsx)("p",{className:"text-sm text-gray-500",children:"--"})]})]}),(0,j.jsx)(d.A,{sx:{my:2}}),(0,j.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:"Service Details"}),(0,j.jsx)(n.A,{variant:"body2",children:"Problem Statement"}),(0,j.jsx)(n.A,{variant:"body1",color:"textSecondary",children:t.bookingServiceDetail}),(0,j.jsx)(d.A,{sx:{my:2}}),(0,j.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:"Date And Time"}),(0,j.jsxs)("div",{className:"flex flex-row",children:[(0,j.jsxs)("div",{className:"mr-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Estimated Date"}),(0,j.jsx)("p",{children:t.bookingStartDate})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Time"}),(0,j.jsx)("p",{children:t.bookingStartTime})]})]}),(0,j.jsx)(d.A,{sx:{my:2}}),(0,j.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:"Work Location Information"}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsxs)("div",{className:"mr-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Digital Address:"}),(0,j.jsx)("p",{children:t.bookingDigitalAddress})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-500",children:"House Number:"}),(0,j.jsx)("p",{children:t.bookingHouseNumber})]})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsxs)("div",{className:"mr-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"City/Town:"}),(0,j.jsx)("p",{children:t.bookingTown})]}),(0,j.jsxs)("div",{className:"mr-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Region:"}),(0,j.jsx)("p",{children:t.bookingRegion})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Country:"}),(0,j.jsx)("p",{children:t.bookingCountry})]})]}),(0,j.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,j.jsxs)("div",{className:"mr-10",children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Neighborhood / Community:"}),(0,j.jsx)("p",{children:t.bookingCommunity})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Closest Landmark:"}),(0,j.jsx)("p",{children:t.bookingLandmark})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-500",children:"Extra Information about Location"}),(0,j.jsx)("p",{children:t.bookingLocationInfo})]})]})}),1===x&&(0,j.jsx)(p,{bookingData:t}),2===x&&(0,j.jsx)(b,{bookingData:t}),3===x&&(0,j.jsx)(v,{bookingData:t})]})]}):(0,j.jsx)(n.A,{variant:"h6",color:"textSecondary",children:"Please select an appointment to view details."})})})]})}}}]);