"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[463],{5463:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(9950),n=t(6491),l=t(899),i=t(2053),r=t(1413),o=t(8437),d=t(4142),c=t(4745),m=t(146),x=t(1959),h=t(5336),g=t(4414);const p=e=>{let{bookingData:s}=e;const[t,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)({bookingEstimateAmount:""});return 0===s.bookingEstimateAmount?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Estimate Details"}),(0,g.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,g.jsx)("p",{children:"Waiting for estimate"})}),(0,g.jsx)("div",{className:"flex flex-col mt-5",children:(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsx)(x.A,{className:"w-5 mr-5"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm",children:"Estimate will be forwarded to client immediately after creation by artisan"})]})})]})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)("h1",{className:"mb-2 text-lg font-bold",children:"Created Estimate"}),(0,g.jsx)("h1",{className:"mb-2 text-sm font-semibold mb-5",children:"Esimated Budget By Artisan"}),(0,g.jsxs)("div",{className:"mb-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Total Amount"}),(0,g.jsxs)("p",{children:["GHC ",s.bookingEstimateAmount,".00"]})]}),(0,g.jsx)("div",{className:"flex flex-col",children:(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsx)(x.A,{className:"w-5 mr-5"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]})})]})})},b=e=>{let{bookingData:s}=e;const[t,n]=(0,a.useState)(!1);return"complete"!==s.bookingPayment?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,g.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,g.jsx)("p",{children:""===s.bookingPayment?"No Payment":"half"===s.bookingPayment?"70% Payment Made":""})}),(0,g.jsxs)("div",{className:"flex flex-row mb-2",children:["complete"!==s.bookingPayment&&"half"!==s.bookingPayment&&(0,g.jsxs)("button",{disabled:t,type:"submit",onClick:async e=>{n(!0),e.preventDefault();try{await(0,h.$E)(s.id,"half"),alert("Appointment Payment Status updated successfully")}catch(t){console.error("Error updating appointment payment status:",t),alert("Error updating appointment payment status")}finally{n(!1)}},className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Mark as 70% Paid",t&&"Please wait..."]}),"half"===s.bookingPayment&&(0,g.jsxs)("button",{disabled:t,type:"submit",onClick:async e=>{n(!0),e.preventDefault();try{await(0,h.$E)(s.id,"complete"),alert("Appointment Payment Status updated successfully")}catch(t){console.error("Error updating appointment payment status:",t),alert("Error updating appointment payment status")}finally{n(!1)}},className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Full Payment",t&&"Please wait..."]})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,g.jsx)("p",{children:0===s.bookingEstimateAmount?"Estimate yet to be created":"GHC "+s.bookingEstimateAmount+".00"})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Artisan's Share"}),(0,g.jsx)("p",{children:"90% of total Amount Charged"})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Management Fee"}),(0,g.jsx)("p",{children:"10% of total Amount Charged"})]}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsx)(x.A,{className:"w-5 mr-5"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]}),(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsx)(x.A,{className:"w-5 mr-5"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm",children:"Mark payment as 70% or full payment, after you've recieved payment from client."})]})]})]})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,g.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,g.jsx)("p",{children:"complete"===s.bookingPayment?"Full Payment Has Been Made":"half"===s.bookingPayment?"70% Payment":""})}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,g.jsx)("p",{children:0===s.bookingEstimateAmount?"Estimate yet to be created":"GHC "+s.bookingEstimateAmount+".00"})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Artisan's Share"}),(0,g.jsx)("p",{children:"90% of total Amount Charged"})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Management Fee"}),(0,g.jsx)("p",{children:"10% of total Amount Charged"})]}),(0,g.jsx)("div",{className:"flex flex-col",children:(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsx)(x.A,{className:"w-5 mr-5"}),(0,g.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has made payment"})]})})]})})},j=e=>{let{bookingData:s}=e;const[t,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Artisan Work Update"}),(0,g.jsx)("div",{className:"complete"===s.bookingStatusArtisan?"bg-green-100 text-green-600 px-4 rounded-[10px] mb-2":"bg-red-100 text-red-600 px-4 rounded-[10px] mb-2",children:(0,g.jsx)("p",{children:"complete"===s.bookingStatusArtisan?"Artisan has completed Work!":"Artisan hasn't completed work yet"})}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Artisan's Work Review"}),(0,g.jsx)("p",{children:"complete"===s.bookingStatusClient?s.bookingReview:"Client yet to drop a review for Artisan"})]}),(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"Artisan's Review Start"}),(0,g.jsx)("p",{children:"complete"===s.bookingStatusClient?s.bookingRate+" stars":"Client hasn't giving you any stars yet..."})]}),(0,g.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Client Work Update"}),(0,g.jsx)("div",{className:"complete"===s.bookingStatusClient?"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5":"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,g.jsx)("p",{children:"complete"===s.bookingStatusClient?"Client has approved the work!":"Waiting for confirmation from client"})}),(0,g.jsx)("div",{children:(0,g.jsx)("p",{className:"text-sm text-gray-500",children:"In case the client is taking too long to verify the work, contact client"})})]})})};var u=t(9818);const f=(0,m.A)(n.A)({backgroundColor:"#f9f9f9",padding:"8px",borderRight:"1px solid #ddd",height:"auto"}),N=(0,m.A)(n.A)({padding:"5px",height:"100vh",overflowY:"auto"});function v(){var e,s,t,m,x,v,y,k;const[w,A]=(0,a.useState)(null),[C,E]=(0,a.useState)(0),[I,S]=(0,a.useState)([]),[P,D]=(0,a.useState)({}),[F,B]=(0,a.useState)({});(0,a.useEffect)((()=>{(async()=>{const e=await(0,h.WT)();S(e),console.log(e)})()}),[]);return(0,a.useEffect)((()=>{(async()=>{const e={};for(const t of I)if(t.bookingClientId&&!e[t.bookingClientId])try{const s=await(0,h.Se)(t.bookingClientId);e[t.bookingClientId]={firstName:s.firstName,lastName:s.lastName,profilePic:s.profilePic,email:s.email,phoneNumber:s.phoneNumber}}catch(s){console.error("Error fetching client data for ID ".concat(t.bookingClientId,":"),s)}D(e)})(),(async()=>{const e={};for(const t of I)if(t.bookingArtisanId&&!e[t.bookingArtisanId])try{const s=await(0,h.VL)(t.bookingArtisanId);e[t.bookingArtisanId]={firstName:s.firstName,lastName:s.lastName,passportImage:s.passportImage,email:s.email,phoneNumber:s.phoneNumber}}catch(s){console.error("Error fetching artisan data for ID ".concat(t.bookingArtisanId,":"),s)}B(e)})()}),[I]),(0,g.jsxs)(l.Ay,{container:!0,children:[(0,g.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,g.jsxs)(f,{children:[(0,g.jsx)(i.A,{className:"text-lg font-bold",gutterBottom:!0,children:"Active Appointments"}),(0,g.jsx)("input",{className:"bg-white rounded-[10px] shadow shadow-lg w-full p-1 mb-5",placeholder:"Search Appointments..."}),(0,g.jsx)("div",{children:I.length>0?I.map(((e,s)=>{var t,a,n,l,i,o;return(0,g.jsx)("div",{button:!0,onClick:()=>{A(e)},selected:w===e,sx:{mb:2},children:(0,g.jsxs)("div",{className:"".concat(w===e?"border border-violet-600":"border border-gray-200"," flex flex-col mb-2 p-4 shadow shadow-lg rounded-[10px] bg-white"),children:[P[e.bookingClientId]||e.bookingEmail?(0,g.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,g.jsxs)("div",{className:"flex flex-row items-cente",children:[(0,g.jsx)(r.A,{src:null!==(t=null===(a=P[e.bookingClientId])||void 0===a?void 0:a.profilePic)&&void 0!==t?t:"",className:"h-7 w-7 mr-2"}),(0,g.jsxs)("p",{className:"text-sm",children:[null!==(n=null===(l=P[e.bookingClientId])||void 0===l?void 0:l.firstName)&&void 0!==n?n:e.bookingEmail," ",null!==(i=null===(o=P[e.bookingClientId])||void 0===o?void 0:o.lastName)&&void 0!==i?i:""]})]}),(0,g.jsx)("div",{className:"".concat(0===e.bookingEstimateAmount?"bg-red-100 text-red-600":"bg-gray-200 text-green-500"," px-4 rounded-[10px]"),children:0===e.bookingEstimateAmount?"Pending":"Estimate Done"})]}):(0,g.jsx)("p",{children:"Loading client details..."}),(0,g.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,g.jsxs)("div",{className:"flex flex-col truncate w-2/4",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Job Description"}),(0,g.jsx)("p",{className:"",children:e.bookingServiceDetail})]}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Expected Date"}),e.bookingStartDate]})]})]})},s)})):(0,g.jsxs)(n.A,{className:"flex flex-col items-center justify-center mt-10",children:[(0,g.jsx)(u.A,{className:"h-20",style:{color:"gray"}}),(0,g.jsx)("p",{className:"font-bold text-lg",children:"You\u2019ve not been booked yet"}),(0,g.jsx)(i.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no booked appointments for you. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})]})}),(0,g.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,g.jsx)(N,{children:w?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex flex-row items-center",children:[(0,g.jsx)(i.A,{className:"text-sm font-bold mr-2",gutterBottom:!0,children:"Appointment Details"}),(0,g.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px]",children:(0,g.jsx)("p",{children:0===w.bookingEstimateAmount?"Waiting for estimate":"Estimate Done"})})]}),(0,g.jsxs)(o.A,{value:C,onChange:(e,s)=>{E(s)},children:[(0,g.jsx)(d.A,{label:"General"}),(0,g.jsx)(d.A,{label:"Estimate"}),(0,g.jsx)(d.A,{label:"Payment"}),(0,g.jsx)(d.A,{label:"Completion"})]}),(0,g.jsxs)(n.A,{p:2,children:[0===C&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,g.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Client Information"}),(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsx)("div",{className:"mr-2",children:(0,g.jsx)(r.A,{className:"h-10 w-10 mr-2",src:null!==(e=null===(s=P[w.bookingClientId])||void 0===s?void 0:s.profilePic)&&void 0!==e?e:""})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:"text-sm",children:[null!==(t=null===(m=P[w.bookingClientId])||void 0===m?void 0:m.firstName)&&void 0!==t?t:w.bookingEmail," ",null!==(x=null===(v=P[w.bookingClientId])||void 0===v?void 0:v.lastName)&&void 0!==x?x:""]}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:null!==(y=null===(k=P[w.bookingClientId])||void 0===k?void 0:k.phoneNumber)&&void 0!==y?y:w.bookingPhoneNumber})]})]}),(0,g.jsx)(c.A,{sx:{my:2}}),(0,g.jsx)("div",{className:"flex flex-col mb-2",children:(0,g.jsx)("p",{className:"text-gray-500",children:"Artisan"})}),F[w.bookingArtisanId]?(0,g.jsxs)("div",{className:"flex flex-row mb-3",children:[(0,g.jsx)(r.A,{className:"h-10 w-10",src:F[w.bookingArtisanId].passportImage}),(0,g.jsxs)("div",{className:"flex flex-col mb-2 ml-2",children:[(0,g.jsxs)("p",{className:"text-sm font-semibold",children:[F[w.bookingArtisanId].firstName," ",F[w.bookingArtisanId].lastName]}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:F[w.bookingArtisanId].email}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:F[w.bookingArtisanId].phoneNumber})]})]}):(0,g.jsx)("p",{children:"Loading artisan details..."}),(0,g.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Service Details"}),(0,g.jsx)(i.A,{variant:"body2",children:"Problem Statement"}),(0,g.jsx)("span",{className:"text-sm text-gray-500",children:(0,g.jsx)("textarea",{contentEditable:"false",value:w.bookingServiceDetail,rows:4,className:"w-full"})}),(0,g.jsx)(c.A,{sx:{my:2}}),(0,g.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Date And Time"}),(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsxs)("div",{className:"mr-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Estimated Date"}),(0,g.jsx)("p",{children:w.bookingStartDate})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Time"}),(0,g.jsx)("p",{children:w.bookingStartTime})]})]}),(0,g.jsx)(c.A,{sx:{my:2}}),(0,g.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Work Location Information"}),(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsxs)("div",{className:"mr-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Digital Address:"}),(0,g.jsx)("p",{children:w.bookingDigitalAddress})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-500",children:"House Number:"}),(0,g.jsx)("p",{children:w.bookingHouseNumber})]})]}),(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsxs)("div",{className:"mr-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"City/Town:"}),(0,g.jsx)("p",{children:w.bookingTown})]}),(0,g.jsxs)("div",{className:"mr-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Region:"}),(0,g.jsx)("p",{children:w.bookingRegion})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Country:"}),(0,g.jsx)("p",{children:w.bookingCountry})]})]}),(0,g.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,g.jsxs)("div",{className:"mr-10",children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Neighborhood / Community:"}),(0,g.jsx)("p",{children:w.bookingCommunity})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Closest Landmark:"}),(0,g.jsx)("p",{children:w.bookingLandmark})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-gray-500",children:"Extra Information about Location"}),(0,g.jsx)("span",{className:"text-sm",children:(0,g.jsx)("textarea",{contentEditable:"false",value:w.bookingLocationInfo,rows:4,className:"w-full"})})]})]})}),1===C&&(0,g.jsx)(p,{bookingData:w}),2===C&&(0,g.jsx)(b,{bookingData:w}),3===C&&(0,g.jsx)(j,{bookingData:w})]})]}):(0,g.jsx)(i.A,{variant:"h6",color:"textSecondary",children:"Please select an appointment to view details."})})})]})}},9818:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(9950);const n=a.forwardRef((function(e,s){let{title:t,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},l),t?a.createElement("title",{id:n},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}))}}]);