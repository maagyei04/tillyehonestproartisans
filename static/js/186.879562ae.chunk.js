"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[186],{2186:(e,l,t)=>{t.r(l),t.d(l,{default:()=>E});var s=t(9950),r=t(300),a=t(2053),o=t(700),i=t(1320),n=t(2235),d=t(5769),c=t(9780),m=t(9213),x=t(1671),h=t(4075),u=t(1413),p=t(226),f=t(7239),v=t(3266),g=t(3464),b=t(33),j=t(8170),A=t(9739),w=t(5336),y=t(9818),N=t(2628),C=t(6992);const k=s.forwardRef((function(e,l){let{title:t,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},a),t?s.createElement("title",{id:r},t):null,s.createElement("path",{fillRule:"evenodd",d:"M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}),s.createElement("path",{d:"M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z"}))}));var S=t(4414);function E(){const e=(0,r.wA)(),[l,t]=(0,s.useState)([]),[E,I]=(0,s.useState)({}),[P,B]=(0,s.useState)(!0),[R,Z]=(0,s.useState)(!1),[_,L]=(0,s.useState)(!1),[D,M]=(0,s.useState)(!1),[T,F]=(0,s.useState)(null),[G,O]=(0,s.useState)(null),[U,V]=(0,s.useState)(null),[Y,H]=(0,s.useState)("All"),[J,Q]=(0,s.useState)(!1),[X,q]=(0,s.useState)([]),[z,K]=(0,s.useState)([]),[W,$]=(0,s.useState)(null),[ee,le]=(0,s.useState)({artisan_id:"",title:"",image_url:""});(0,s.useEffect)((()=>{(async()=>{const e=await(0,w.iY)();t(e),B(!1)})(),(async()=>{const e=await(0,w.LZ)();q(e)})()}),[]),(0,s.useEffect)((()=>{l.length>0&&(async()=>{for(const e of l){const l=await(0,w.JS)(e.clientId);I((t=>({...t,[e.artisanId]:l})))}})()}),[l]);const te=()=>{F(null)},se=()=>{Z(!0),te()},re=()=>{L(!0),te()},ae=()=>{const e=[];X.forEach((l=>{l.artisan_id===(null===G||void 0===G?void 0:G.artisanId)&&(e.push(l),K(e))})),Q(!0),te()},oe=()=>{Q(!1),K([])},ie=e=>{V(e)},ne=()=>{V(null)},de=l.filter((e=>"All"===Y||("Blocked"===Y?!e.status:"Active"===Y?e.status:"Supplier"!==Y||("Supplier"===e.businessField||!0===e.seller||"Supplier"===(null===e||void 0===e?void 0:e.businessFieldSecondary)))));return(0,S.jsxs)("div",{children:[(0,S.jsx)(a.A,{variant:"h4",gutterBottom:!0,className:"font-bold text-xl",children:"Artisans (Users)"}),(0,S.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,S.jsx)("div",{htmlFor:"filter-select",children:"Filter"}),(0,S.jsxs)(o.A,{native:!0,value:Y,onChange:e=>{H(e.target.value)},inputProps:{name:"filter",id:"filter-select"},children:[(0,S.jsx)("option",{value:"All",children:"All"}),(0,S.jsx)("option",{value:"Blocked",children:"Blocked"}),(0,S.jsx)("option",{value:"Active",children:"Active"}),(0,S.jsx)("option",{value:"Supplier",children:"Suppliers"})]})]}),(0,S.jsx)(i.A,{component:n.A,sx:{marginTop:4,overflowX:"auto"},children:(0,S.jsxs)(d.A,{"aria-label":"responsive table",children:[(0,S.jsx)(c.A,{className:"bg-gray-200",children:(0,S.jsxs)(m.A,{children:[(0,S.jsx)(x.A,{children:"Artisan Name"}),(0,S.jsx)(x.A,{children:"Phone Number"}),(0,S.jsx)(x.A,{children:"Email"}),(0,S.jsx)(x.A,{children:"Status"}),(0,S.jsx)(x.A,{children:"Passport"}),(0,S.jsx)(x.A,{children:"Ghana Card"}),(0,S.jsx)(x.A,{children:"Gaurantor"}),(0,S.jsx)(x.A,{children:"Action"})]})}),(0,S.jsx)(h.A,{children:de.length>0?de.map(((e,l)=>(0,S.jsxs)(m.A,{children:[(0,S.jsxs)(x.A,{className:"text-gray-500 flex flex-row font-semibold",children:[(0,S.jsx)(u.A,{src:null===e||void 0===e?void 0:e.passportImage,className:"mr-2 h-10 w-10"}),null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,S.jsx)(x.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.phoneNumber}),(0,S.jsx)(x.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.email}),(0,S.jsx)(x.A,{className:null!==e&&void 0!==e&&e.status?"text-green-600 font-semibold":"text-red-600 font-semibold",children:null!==e&&void 0!==e&&e.status?"Active":"Blocked"}),(0,S.jsx)(x.A,{className:"text-violet-500",children:(0,S.jsx)("span",{onClick:()=>ie(null===e||void 0===e?void 0:e.passportImage),style:{cursor:"pointer"},children:"Passport Image"})}),(0,S.jsx)(x.A,{className:"text-violet-500",children:(0,S.jsx)("span",{onClick:()=>ie(null===e||void 0===e?void 0:e.ghanaCardImage),style:{cursor:"pointer"},children:"Ghana Card"})}),(0,S.jsx)(x.A,{className:"text-violet-500",children:(0,S.jsx)("span",{onClick:()=>ie(null===e||void 0===e?void 0:e.gaurantorNoteImage),style:{cursor:"pointer"},children:"Gaurantor Note"})}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(p.A,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:l=>{return t=e,F(l.currentTarget),void O(t);var t},className:"bg-violet-500 hover:bg-green-900 text-white hover:text-white px-2 py-1 rounded",children:"Action"}),(0,S.jsxs)(f.A,{id:"simple-menu",anchorEl:T,keepMounted:!0,open:Boolean(T),onClose:te,className:"rounded",children:[(0,S.jsx)(v.A,{onClick:se,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(N.A,{className:"h-5 w-5 mr-2 text-red-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Block"})]})}),(0,S.jsx)(v.A,{onClick:re,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(C.A,{className:"h-5 w-5 mr-2 text-green-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Approve"})]})}),(0,S.jsx)(v.A,{onClick:ae,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(k,{className:"h-5 w-5 mr-2 text-brown-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Portfolio"})]})})]})]})]},l))):(0,S.jsx)(m.A,{children:(0,S.jsx)(x.A,{colSpan:6,children:(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center mt-10",children:[(0,S.jsx)(y.A,{className:"h-10",style:{color:"gray"}}),(0,S.jsx)("p",{className:"font-bold text-lg",children:"No artisans match the current filter"}),(0,S.jsx)(a.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"Adjust your filter criteria or wait for new artisans to register."})]})})})})]})}),(0,S.jsxs)(g.A,{className:"rounded-[20px]",open:R,onClose:()=>Z(!1),children:[(0,S.jsx)(b.A,{className:"font-bold text-sm",children:"Are you sure you want to block this Artisan ?"}),(0,S.jsx)(j.A,{children:(0,S.jsx)(a.A,{className:"text-gray-500 text-sm",children:"Artisan won't be able to access this platform with this email anymore. Remember to refresh page after!"})}),(0,S.jsxs)(A.A,{children:[(0,S.jsx)(p.A,{onClick:()=>Z(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(p.A,{onClick:async e=>{B(!0),e.preventDefault();try{await(0,w.gf)(null===G||void 0===G?void 0:G.artisanId,!1),alert("Artisan has been successfully blocked!")}catch(l){console.error("Error blocking artisan:",l),alert("Error blocking artisan")}finally{B(!1),Z(!1)}},disabled:P,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:P?"Please wait...":"Confirm"})]})]}),(0,S.jsxs)(g.A,{className:"rounded-[20px]",open:_,onClose:()=>L(!1),children:[(0,S.jsx)(b.A,{className:"font-bold text-sm",children:"Are you sure you want to approve this Artisan ?"}),(0,S.jsx)(j.A,{children:(0,S.jsx)(a.A,{className:"text-gray-500 text-sm",children:"Artisan will now be able to receive bookings on this platform \ud83c\udf8a. Remember to refresh page after!"})}),(0,S.jsxs)(A.A,{children:[(0,S.jsx)(p.A,{onClick:()=>L(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(p.A,{onClick:async e=>{B(!0),e.preventDefault();try{await(0,w.gf)(null===G||void 0===G?void 0:G.artisanId,!0),alert("Artisan has been successfully approved!")}catch(l){console.error("Error approve artisan:",l),alert("Error approve client")}finally{B(!1),L(!1)}},disabled:P,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:P?"Please wait...":"Confirm"})]})]}),(0,S.jsxs)(g.A,{className:"rounded-[20px]",open:Boolean(U),onClose:ne,children:[(0,S.jsx)(b.A,{className:"font-bold text-sm",children:"Image Preview"}),(0,S.jsx)(j.A,{children:U&&(0,S.jsx)("img",{src:U,alt:"Preview",style:{width:"100%",height:"auto"}})}),(0,S.jsx)(A.A,{children:(0,S.jsx)(p.A,{onClick:ne,className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Close"})})]}),(0,S.jsxs)(g.A,{className:"rounded-[20px]",open:D,onClose:()=>M(!1),children:[(0,S.jsx)(b.A,{className:"font-bold text-sm",children:"Are you sure you want to delete this Artisan ?"}),(0,S.jsx)(j.A,{children:(0,S.jsx)(a.A,{className:"text-gray-500 text-sm",children:"Artisan will be removed from this platform \ud83c\udf8a."})}),(0,S.jsxs)(A.A,{children:[(0,S.jsx)(p.A,{onClick:()=>M(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(p.A,{onClick:async e=>{if(G){M(!1),B(!0),e.preventDefault();try{await(0,w.T)(G.artisanId),console.log("User deletion process completed successfully."),alert("User deletion process completed successfully.")}catch(l){console.error("Error deleting user:",l),alert("Error deleting user: ".concat(l.message))}finally{B(!1)}}else console.error("No artisan selected for deletion")},disabled:P,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:P?"Please wait...":"Confirm"})]})]}),(0,S.jsxs)(g.A,{className:"rounded-[20px]",open:J,onClose:oe,children:[(0,S.jsx)(b.A,{className:"font-bold text-sm",children:"Add/Delete Portfolio"}),(0,S.jsx)(j.A,{children:(0,S.jsxs)("form",{children:[(0,S.jsxs)("h1",{className:"text-lg font-bold mb-4",children:[null===G||void 0===G?void 0:G.firstName,"'s Portfolio"]}),(0,S.jsx)("div",{className:"portfolio-list mb-4",style:{maxHeight:"200px",overflowY:"auto"},children:z.map(((l,t)=>(0,S.jsx)("div",{className:"mb-4 flex-col justify-between items-center bg-gray-200 shadow shadow-lg p-4 rounded-[10px]",children:(0,S.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-black text-sm font-bold",children:l.title}),(0,S.jsx)("img",{src:l.image_url,height:50,width:50,alt:"portfolio"})]}),(0,S.jsx)("div",{className:"flex items-center space-x-2",children:(0,S.jsx)("div",{onClick:()=>(async l=>{B(!0);try{await e((0,w._s)(l)),alert("Portfolio deleted successfully for artisan")}catch(t){console.error("Error deleting portfolio for artisan:",t),alert("Error deleting portfolio for artisan")}finally{B(!1)}})(l.id),className:"text-red-600 cursor-pointer",children:(0,S.jsx)("i",{className:"material-icons",children:"delete"})})})]})},t)))}),(0,S.jsxs)("div",{className:"mb-4",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,S.jsx)("input",{type:"title",name:"title",onChange:e=>{const{name:l,value:t}=e.target;le((e=>({...e,[l]:t})))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,S.jsxs)("div",{className:"mb-4",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),(0,S.jsx)("input",{type:"file",name:"image_url",alt:"image_url",accept:"image/*",onChange:e=>{$(e.target.files[0])},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})}),(0,S.jsxs)(A.A,{children:[(0,S.jsx)(p.A,{onClick:oe,className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsxs)(p.A,{onClick:async l=>{K([]),B(!0),l.preventDefault();try{let l={...ee};if(W){const t=await(0,w.jp)(W,e);l.image_url=t,l.artisan_id=null===G||void 0===G?void 0:G.artisanId}console.log(l),await e((0,w.IQ)(l)),alert("Portfolio added successfully for artisan")}catch(t){console.error("Error adding portfolio for artisan:",t),alert("Error adding portfolio for artisan")}finally{B(!1),Q(!1)}},disabled:P,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:[!P&&"Add To Portfolio",P&&"Please wait..."]})]})]})]})}},6992:(e,l,t)=>{t.d(l,{A:()=>r});var s=t(9950);const r=s.forwardRef((function(e,l){let{title:t,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},a),t?s.createElement("title",{id:r},t):null,s.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}))},2628:(e,l,t)=>{t.d(l,{A:()=>r});var s=t(9950);const r=s.forwardRef((function(e,l){let{title:t,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},a),t?s.createElement("title",{id:r},t):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}))}}]);