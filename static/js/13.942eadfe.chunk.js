"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[13],{13:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var a=t(9950),l=t(6491),n=t(899),r=t(2053),i=t(1413),o=t(8437),c=t(4142),d=t(4745),x=t(146),m=t(1959),h=t(4414);const j=e=>{let{bookingData:s}=e;return 0===s.bookingEstimateAmount?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Estimate Details"}),(0,h.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,h.jsx)("p",{children:"Waiting for estimate"})}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"You will be able to go through appointments estimate and make payment for work to begin once the artisan sends the estimate"})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Appointment will be cancelled if estimate is not ready after the first 2 weeks"})]})]})]})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Estimate Details"}),(0,h.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,h.jsx)("p",{children:"Done"})}),(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Esimated Budget"}),(0,h.jsxs)("div",{className:"mb-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Total Amount"}),(0,h.jsx)("p",{children:s.bookingEstimateAmount})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"You can continue to next tab, to make payment please"})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Appointment will be cancelled if estimate is not ready after the first 2 weeks"})]})]})]})})},p=e=>{let{bookingData:s}=e;return 0!==s.bookingEstimateAmount&&"complete"===s.bookingPayment?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,h.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,h.jsx)("p",{children:"Full Payment"})}),(0,h.jsxs)("div",{className:"mb-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,h.jsx)("p",{children:"GHc 2000"})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Client will receive full payment once you confirm that the entire work has been completed"})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Open the completion page to confirm the completion of the artisan\u2019s work"})]})]})]})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Payment Information"}),(0,h.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,h.jsx)("p",{children:0===s.bookingEstimateAmount?"waiting for Estimate":"yet to make full payment"})}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Client will receive full payment once you confirm that the entire work has been completed"})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Open the completion page to confirm the completion of the artisan\u2019s work"})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5 mt-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsxs)("p",{className:"text-gray-500 text-sm",children:["You are required to make 70% payment to the Administrator's number below before work, and 30% later after work completion.",(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"font-bold text-sm",children:"MTN MoMo"}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"font-bold text-sm",children:"Name: Esi Gyatowa Sam"}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"font-bold text-sm",children:"Number: +233531293686"}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{children:"Please use your Name as reference.."})]})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsx)(m.A,{className:"w-5 mr-5"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Please reach out to the Administrators after Payment, for them to confirm your payment."})]})]})]})})};var b=t(700),g=t(3266),u=t(9231),f=t(3464),N=t(33),v=t(8170),w=t(9739),y=t(226),A=t(5336);const k=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(!1),m=async e=>{l(!1),x(!0),e.preventDefault();try{await(0,A.N)(s.id,n),await(0,A.tV)(s.id,o),await(0,A.ex)(s.id,"complete"),alert("Booking has been marked as completed!")}catch(t){console.error("Error marking booking as completed:",t),alert("Error marking booking as completed:")}finally{x(!1)}};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Appointment Completion"}),(0,h.jsx)("div",{className:""===s.bookingStatusArtisan?"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5":"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,h.jsx)("p",{children:""===s.bookingStatusArtisan?"Artisan hasn't completed work yet":"Artisan has completed work"})}),(0,h.jsxs)("div",{className:"flex flex-col",children:[""===s.bookingStatusClient?(0,h.jsxs)("div",{className:"flex flex-col mb-5",children:[(0,h.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Rate the Artisan"}),(0,h.jsxs)(b.A,{value:n,onChange:e=>{i(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Select Rating"},sx:{minWidth:120},children:[(0,h.jsx)(g.A,{value:"",children:(0,h.jsx)("em",{children:"All Ratings"})}),(0,h.jsx)(g.A,{value:"5",children:"5"}),(0,h.jsx)(g.A,{value:"4",children:"4"}),(0,h.jsx)(g.A,{value:"3",children:"3"}),(0,h.jsx)(g.A,{value:"2",children:"2"}),(0,h.jsx)(g.A,{value:"1",children:"1"})]})]}):(0,h.jsx)("div",{className:"mb-5 mt-5",children:(0,h.jsxs)("p",{className:"text-sm font-bold text-500",children:["You Rated Artisan: ",(0,h.jsxs)("span",{className:"text-green-600",children:[s.bookingRate," stars"]})]})}),""===s.bookingStatusClient?(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex flex-col mb-5",children:[(0,h.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Give a Review about the appointments or Artisan"}),(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)(u.h,{className:"border border-gray-300 rounded-[10px] p-2",id:"review",name:"review",placeholder:"Leave a review here...",value:o,onChange:e=>{c(e.target.value)},minRows:5,required:!0})})]}),(0,h.jsx)("button",{className:"w-full btn bg-violet-600 text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",type:"button",onClick:()=>{l(!0)},children:"Service Completed"})]}):(0,h.jsx)("div",{className:"mb-5 mt-5",children:(0,h.jsxs)("p",{className:"text-sm font-bold text-500",children:["You Reviewed Artisan as:  ",(0,h.jsx)("span",{className:"text-green-600",children:s.bookingReview})]})})]})]}),(0,h.jsxs)(f.A,{className:"rounded-[20px]",open:t,onClose:m,children:[(0,h.jsx)(N.A,{className:"font-bold text-sm",children:"Are you sure you want to mark this service as completed?"}),(0,h.jsx)(v.A,{children:(0,h.jsx)(r.A,{className:"text-gray-500 text-sm",children:"This is the final stage of the appointment. Thank you for using our platform \ud83c\udf8a"})}),(0,h.jsxs)(w.A,{children:[(0,h.jsx)(y.A,{onClick:m,className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,h.jsx)(y.A,{onClick:m,disabled:d,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:d?"please waait...":"Confirm"})]})]})]})};var C=t(1032),S=t(9818);const E=(0,x.A)(l.A)({backgroundColor:"#f9f9f9",padding:"8px",borderRight:"1px solid #ddd",height:"auto"}),D=(0,x.A)(l.A)({padding:"5px",height:"100vh",overflowY:"auto"});function I(){const{userLoggedIn:e,currentUser:s}=(0,C.A)(),[t,x]=(0,a.useState)(null),[m,b]=(0,a.useState)(0),[g,u]=(0,a.useState)([]),[f,N]=(0,a.useState)({}),[v,w]=(0,a.useState)({});(0,a.useEffect)((()=>{(async()=>{if(e&&null!==s&&void 0!==s&&s.uid){const e=await(0,A.JS)(s.uid);u(e)}})()}),[e,s]),(0,a.useEffect)((()=>{(async()=>{const e={};for(const s of g)if(!e[s.bookingArtisanId]){const t=await(0,A.VL)(s.bookingArtisanId);e[s.bookingArtisanId]=t.firstName}N(e)})()}),[g]);return(0,h.jsxs)(n.Ay,{container:!0,children:[(0,h.jsx)(n.Ay,{item:!0,xs:12,md:4,children:(0,h.jsxs)(E,{children:[(0,h.jsx)(r.A,{className:"text-lg font-bold",gutterBottom:!0,children:"Active Appointments"}),(0,h.jsx)("input",{className:"bg-white rounded-[10px] shadow shadow-lg w-full p-1 mb-5",placeholder:"Search Appointments..."}),(0,h.jsx)("div",{children:g.length>0?g.map(((e,s)=>(0,h.jsx)("div",{button:!0,onClick:()=>(e=>{x(e)})(e),selected:t===e,sx:{mb:2},children:(0,h.jsxs)("div",{className:"".concat(t===e?"border border-violet-600":"border border-gray-200"," flex flex-col mb-2 p-4 shadow shadow-lg rounded-[10px] bg-white"),children:[(0,h.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,h.jsxs)("div",{className:"flex flex-row items-cente",children:[(0,h.jsx)(i.A,{className:"h-5 w-5 mr-2"}),(0,h.jsx)("p",{className:"text-sm",children:f[e.bookingArtisanId]})]}),(0,h.jsx)("div",{className:"".concat(0===e.bookingEstimateAmount?"bg-red-100 text-red-600":"bg-gray-200 text-green-500"," px-4 rounded-[10px]"),children:0===e.bookingEstimateAmount?"Pending":"Estimate Done"})]}),(0,h.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,h.jsxs)("div",{className:"flex flex-col truncate w-2/4",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Job Description"}),e.bookingServiceDetail]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Expected Date"}),e.bookingStartDate]})]})]})},s))):(0,h.jsxs)(l.A,{className:"flex flex-col items-center justify-center mt-10",children:[(0,h.jsx)(S.A,{className:"h-20",style:{color:"gray"}}),(0,h.jsx)("p",{className:"font-bold text-lg",children:"You\u2019ve not booked any artisan yet"}),(0,h.jsx)(r.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no booked artisans for you. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})]})}),(0,h.jsx)(n.Ay,{item:!0,xs:12,md:8,children:(0,h.jsx)(D,{children:t?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"flex flex-row items-center",children:[(0,h.jsx)(r.A,{className:"text-sm font-bold mr-2",gutterBottom:!0,children:"Appointment Details"}),(0,h.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px]",children:(0,h.jsx)("p",{children:0===t.bookingEstimateAmount?"Waiting for estimate":"Estimate Done"})})]}),(0,h.jsxs)(o.A,{value:m,onChange:(e,s)=>{b(s)},children:[(0,h.jsx)(c.A,{label:"General"}),(0,h.jsx)(c.A,{label:"Estimate"}),(0,h.jsx)(c.A,{label:"Payment"}),(0,h.jsx)(c.A,{label:"Completion"})]}),(0,h.jsxs)(l.A,{p:2,children:[0===m&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,h.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:"Client Information"}),(0,h.jsxs)("div",{className:"flex flex-row",children:[(0,h.jsx)("div",{className:"mr-2",children:(0,h.jsx)(i.A,{className:"h-10 w-10 mr-2",src:t.avatar})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm",children:f[t.bookingArtisanId]}),(0,h.jsx)("p",{className:"text-sm text-gray-500",children:"Accra"})]})]}),(0,h.jsx)(d.A,{sx:{my:2}}),(0,h.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:"Service Details"}),(0,h.jsx)(r.A,{variant:"body2",children:"Problem Statement"}),(0,h.jsx)(r.A,{variant:"body1",color:"textSecondary",children:(0,h.jsx)("span",{className:"text-sm text-gray-500",children:(0,h.jsx)("textarea",{contentEditable:"false",value:t.bookingServiceDetail,rows:4,className:"w-full"})})}),(0,h.jsx)(d.A,{sx:{my:2}}),(0,h.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:"Date And Time"}),(0,h.jsxs)("div",{className:"flex flex-row",children:[(0,h.jsxs)("div",{className:"mr-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Estimated Date"}),(0,h.jsx)("p",{children:t.bookingStartDate})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Time"}),(0,h.jsx)("p",{children:t.bookingStartTime})]})]}),(0,h.jsx)(d.A,{sx:{my:2}}),(0,h.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:"Work Location Information"}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsxs)("div",{className:"mr-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Digital Address:"}),(0,h.jsx)("p",{children:t.bookingDigitalAddress})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-gray-500",children:"House Number:"}),(0,h.jsx)("p",{children:t.bookingHouseNumber})]})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsxs)("div",{className:"mr-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"City/Town:"}),(0,h.jsx)("p",{children:t.bookingTown})]}),(0,h.jsxs)("div",{className:"mr-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Region:"}),(0,h.jsx)("p",{children:t.bookingRegion})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Country:"}),(0,h.jsx)("p",{children:t.bookingCountry})]})]}),(0,h.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,h.jsxs)("div",{className:"mr-10",children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Neighborhood / Community:"}),(0,h.jsx)("p",{children:t.bookingCommunity})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Closest Landmark:"}),(0,h.jsx)("p",{children:t.bookingLandmark})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-gray-500",children:"Extra Information about Location"}),(0,h.jsx)("span",{className:"text-sm=",children:(0,h.jsx)("textarea",{contentEditable:"false",value:t.bookingLocationInfo,rows:4,className:"w-full"})})]})]})}),1===m&&(0,h.jsx)(j,{bookingData:t}),2===m&&(0,h.jsx)(p,{bookingData:t}),3===m&&(0,h.jsx)(k,{bookingData:t})]})]}):(0,h.jsx)(r.A,{variant:"h6",color:"textSecondary",children:"Please select an appointment to view details."})})})]})}}}]);