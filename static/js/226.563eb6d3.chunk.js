"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[226],{7845:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(9950),l=t(899),n=t(6491),o=t(8089),r=t(2053),i=t(704),c=t(1413),d=t(3464),m=t(33),x=t(8170),h=t(9739),f=t(226),b=t(5195),g=t(2074),p=t(9818),u=t(2628),N=t(4414);const j={backgroundColor:"white",padding:"16px",margin:"8px 0",borderRadius:"10px"};function y(){const[e,s]=(0,a.useState)(!1),[t,y]=(0,a.useState)(!1),[w,k]=(0,a.useState)([]),[A,v]=(0,a.useState)([]),[C,I]=(0,a.useState)([]),[E,S]=(0,a.useState)([]),[L,R]=(0,a.useState)([]),[P,B]=(0,a.useState)({}),[D,T]=(0,a.useState)({}),[Z,V]=(0,a.useState)([]),[W,Y]=(0,a.useState)(""),[H,O]=(0,a.useState)({category:""}),_=()=>{s(!1)};(0,a.useEffect)((()=>{(async()=>{const e=await(0,b.uY)();k(e)})(),(async()=>{const e=await(0,b.$N)();S(e)})(),(async()=>{const e=await(0,b.iY)();R(e)})(),(async()=>{const e=await(0,b.WT)();v(e)})(),(async()=>{const e=await(0,b.sL)(3);I(e)})(),(async()=>{try{const e=await(0,b.wV)();V(e)}catch(e){console.error("Error fetching categories:",e)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e={};for(const s of A)if(!e[s.bookingClientId]){const t=await(0,b.Se)(s.bookingClientId);e[s.bookingClientId]={firstName:t.firstName,lastName:t.lastName,profilePic:t.profilePic,email:t.email,phoneNumber:t.phoneNumber}}B(e)})(),(async()=>{const e={};for(const s of A)if(!e[s.bookingArtisanId]){const t=await(0,b.VL)(s.bookingArtisanId);e[s.bookingArtisanId]={firstName:t.firstName,lastName:t.lastName,passportImage:t.passportImage,email:t.email,phoneNumber:t.phoneNumber}}T(e)})()}),[A]);let G,J,M=0;const U=[];w.forEach((e=>{""===e.bookingPayment&&0!==e.bookingEstimateAmount&&(M+=e.bookingEstimateAmount)})),G=E.length+L.length,J=A.length,C.forEach((e=>{0===e.bookingEstimateAmount&&"complete"!==e.bookingPayment&&"complete"!==e.bookingStatusArtisan&&"complete"!==e.bookingStatusClient&&U.push(e)}));return(0,N.jsxs)("div",{children:[(0,N.jsx)("h1",{className:"font-bold text-2xl",children:"Hi Admin!"}),(0,N.jsxs)(l.Ay,{container:!0,className:"flex flex-col md:flex-row",children:[(0,N.jsxs)(l.Ay,{item:!0,xs:12,md:8,className:"p-2",children:[(0,N.jsx)("p",{className:"text-sm text-gray-500",children:"Below is an overview for business so far..."}),(0,N.jsxs)(n.A,{className:"flex flex-col h-full",children:[(0,N.jsxs)(n.A,{className:"flex flex-col md:flex-row justify-between mb-2",children:[(0,N.jsxs)(n.A,{className:"shadow-xl shadow-black-600",sx:{...j,flex:1,mr:2},children:[(0,N.jsx)("p",{className:"mb-2",children:"Total Revenue"}),(0,N.jsxs)("p",{className:"mb-2 font-bold text-xl text-blue-600",children:["GHC ",M,".00"]})]}),(0,N.jsxs)(n.A,{className:"shadow-xl shadow-black-600",sx:{...j,flex:1,mr:2},children:[(0,N.jsx)("p",{className:"mb-2",children:"Total Users"}),(0,N.jsx)("p",{className:"mb-2 font-bold text-violet-600",children:G}),(0,N.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,N.jsx)("span",{className:"text-blue-700",children:"Both"})," clients and artisans"]})]}),(0,N.jsxs)(n.A,{className:"shadow-xl shadow-black-600",sx:{...j,flex:1,mr:2},children:[(0,N.jsx)("p",{className:"mb-2",children:"Total Appointment(s)"}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:(0,N.jsx)("span",{className:"text-green-500",children:J})}),(0,N.jsxs)("p",{className:"text-sm text-gray-500",children:["Since operations ",(0,N.jsx)("span",{className:"text-blue-700",children:"began"})]})]})]}),(0,N.jsxs)(o.A,{className:"w-full p-2 shadow-xl shadow-black-600 flex-1",children:[(0,N.jsx)(r.A,{variant:"h6",className:"text-gray-500 font-bold text-lg",children:"Categories"}),(0,N.jsx)(i.A,{className:"w-full flex flex-row justify-between flex-wrap",children:Z.map(((e,t)=>(0,N.jsx)("div",{value:e,children:(0,N.jsxs)("div",{className:"p-3 rounded-[10px] shadow shadow-lg w-auto bg-gray-600 mb-2 flex flex-row",children:[(0,N.jsx)("p",{className:"text-white font-bold mr-2 hover:hand-pointer",children:e}),(0,N.jsx)(u.A,{className:"w-5 h-5 text-red-400 cursor-pointer",onClick:()=>(e=>{s(!0),Y(e)})(e)})]})},t)))}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Add Category"}),(0,N.jsx)("input",{type:"text",name:"category",value:H.category,onChange:e=>{const{name:s,value:t}=e.target;O((e=>({...e,[s]:t})))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,N.jsxs)("button",{disabled:t,onClick:async e=>{y(!0),e.preventDefault();try{await(0,b.CR)(H.category),s(!1),alert("Category added successfully, please refresh page"),O({category:""})}catch(t){console.error("Error adding category:",t),alert("Error adding category")}finally{y(!1)}},type:"submit",className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Add Category",t&&"Please wait..."]})]})]})]}),(0,N.jsxs)(l.Ay,{item:!0,xs:12,md:4,className:"flex flex-col p-2",children:[(0,N.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,N.jsx)("div",{children:(0,N.jsx)(r.A,{className:"text-l font-bold",gutterBottom:!0,children:"Incoming Appointments"})}),(0,N.jsx)("div",{children:(0,N.jsx)("p",{className:"text-blue-600",children:(0,N.jsx)(g.N_,{to:"/admin_dashboard/appointments",children:"See All"})})})]}),(0,N.jsx)(r.A,{variant:"body1",className:"text-gray-500",gutterBottom:!0,children:"Verify and view latest appointments"}),U.length>0?U.map(((e,s)=>(0,N.jsxs)(n.A,{className:"mb-2 shadow-xl shadow-black-600",sx:j,children:[P[e.bookingClientId]?(0,N.jsxs)("div",{className:"flex flex-row",children:[(0,N.jsx)(c.A,{src:P[e.bookingClientId].profilePic}),(0,N.jsxs)("div",{className:"flex flex-col mb-2 ml-2",children:[(0,N.jsxs)("p",{className:"text-sm font-semibold",children:[P[e.bookingClientId].firstName," ",P[e.bookingClientId].lastName]}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:P[e.bookingClientId].email}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:P[e.bookingClientId].phoneNumber})]})]}):(0,N.jsx)("p",{children:"Loading client details..."}),(0,N.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,N.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,N.jsx)("p",{className:"text-gray-500",children:"Estimated Date"}),(0,N.jsx)("p",{className:"font-bold text-sm",children:e.bookingStartDate})]}),(0,N.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,N.jsx)("p",{className:"text-gray-500",children:"City/Town"}),(0,N.jsx)("p",{className:"font-bold text-sm",children:e.bookingTown})]})]}),(0,N.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,N.jsx)("p",{className:"text-gray-500",children:"Job Description"}),(0,N.jsx)("p",{className:"font-bold text-sm truncate max-w-full",children:e.bookingServiceDetail})]}),(0,N.jsxs)("div",{className:"flex flex-col mb-5",children:[(0,N.jsx)("p",{className:"text-gray-500",children:"Status"}),(0,N.jsx)("div",{className:"px-4 bg-red-200 rounded py-1",children:(0,N.jsx)("p",{className:"font-bold text-sm text-red-600",children:0===e.bookingEstimateAmount?"Waiting for estimate...":"Estimate Done"})})]}),(0,N.jsx)("div",{className:"flex flex-col mb-2",children:(0,N.jsx)("p",{className:"text-gray-500",children:"Artisan"})}),D[e.bookingArtisanId]?(0,N.jsxs)("div",{className:"flex flex-row",children:[(0,N.jsx)(c.A,{src:D[e.bookingArtisanId].passportImage}),(0,N.jsxs)("div",{className:"flex flex-col mb-2 ml-2",children:[(0,N.jsxs)("p",{className:"text-sm font-semibold",children:[D[e.bookingArtisanId].firstName," ",D[e.bookingArtisanId].lastName]}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:D[e.bookingArtisanId].email}),(0,N.jsx)("p",{className:"text-sm text-gray-500",children:D[e.bookingArtisanId].phoneNumber})]})]}):(0,N.jsx)("p",{children:"Loading artisan details..."})]},s))):(0,N.jsxs)(n.A,{className:"mb-2 shadow-xl flex flex-col items-center shadow-black-600",sx:j,children:[(0,N.jsx)(p.A,{className:"h-20",style:{color:"gray"}}),(0,N.jsx)("p",{className:"font-bold text-lg",children:"No new Appointments"})]})]})]}),(0,N.jsxs)(d.A,{className:"rounded-[20px]",open:e,onClose:_,children:[(0,N.jsx)(m.A,{className:"font-bold text-sm",children:"Are you sure you want to delete this Category ?"}),(0,N.jsx)(x.A,{children:(0,N.jsx)(r.A,{className:"text-gray-500 text-sm",children:"You can click on confirm to delete this category \ud83c\udf8a. Remember to refresh page after!"})}),(0,N.jsxs)(h.A,{children:[(0,N.jsx)(f.A,{onClick:_,className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,N.jsx)(f.A,{onClick:()=>(async e=>{y(!0);try{await(0,b.ZC)(e),alert("Category removed successfully, please refresh page"),V((s=>s.filter((s=>s!==e))))}catch(s){console.error("Error removing category:",s),alert("Error removing category")}finally{y(!1)}})(W),disabled:t,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:t?"Please wait...":"Confirm"})]})]})]})}},9818:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(9950);const l=a.forwardRef((function(e,s){let{title:t,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},n),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}))},2628:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(9950);const l=a.forwardRef((function(e,s){let{title:t,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},n),t?a.createElement("title",{id:l},t):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}))}}]);