"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[643],{6643:(e,l,t)=>{t.r(l),t.d(l,{default:()=>B});var s=t(9950),n=t(300),i=t(2053),r=t(700),a=t(1320),o=t(2235),c=t(5769),d=t(9780),h=t(9213),x=t(1671),u=t(4075),m=t(1413),v=t(226),f=t(7239),b=t(3266),p=t(3464),g=t(33),A=t(8170),j=t(9739),w=t(5336),y=t(9818),N=t(2628),C=t(6992);const k=s.forwardRef((function(e,l){let{title:t,titleId:n,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,s.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}));var E=t(2596),S=t(4414);function B(){const[e,l]=(0,s.useState)([]),[t,B]=(0,s.useState)({}),[I,R]=(0,s.useState)(!0),[M,Z]=(0,s.useState)(!1),[P,L]=(0,s.useState)(!1),[D,O]=(0,s.useState)(!1),[T,U]=(0,s.useState)(null),[F,Y]=(0,s.useState)(null),[q,G]=(0,s.useState)("All"),J=(0,n.wA)(),W=(0,n.d4)((e=>e.artisan));(0,s.useEffect)((()=>{(async()=>{const e=await(0,w.$N)();l(e),R(!1)})()}),[]),(0,s.useEffect)((()=>{e.length>0&&(async()=>{for(const l of e){const e=await(0,w.JS)(l.clientId);B((t=>({...t,[l.clientId]:e})))}})()}),[e]);const X=()=>{U(null)},$=()=>{Z(!0),X()},z=()=>{L(!0),X()},H=()=>{O(!0),X()},K=e.filter((e=>"All"===q||("Blocked"===q?!e.status:"Active"!==q||e.status)));return(0,S.jsxs)("div",{children:[(0,S.jsx)(i.A,{variant:"h4",gutterBottom:!0,className:"font-bold text-xl",children:"Clients (Users)"}),(0,S.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,S.jsx)("div",{htmlFor:"filter-select",children:"Filter"}),(0,S.jsxs)(r.A,{native:!0,value:q,onChange:e=>{G(e.target.value)},inputProps:{name:"filter",id:"filter-select"},children:[(0,S.jsx)("option",{value:"All",children:"All"}),(0,S.jsx)("option",{value:"Blocked",children:"Blocked"}),(0,S.jsx)("option",{value:"Active",children:"Active"})]})]}),(0,S.jsx)(a.A,{component:o.A,sx:{marginTop:4,overflowX:"auto"},children:(0,S.jsxs)(c.A,{"aria-label":"responsive table",children:[(0,S.jsx)(d.A,{className:"bg-gray-200",children:(0,S.jsxs)(h.A,{children:[(0,S.jsx)(x.A,{children:"Client Name"}),(0,S.jsx)(x.A,{children:"Phone Number"}),(0,S.jsx)(x.A,{children:"Email"}),(0,S.jsx)(x.A,{children:"Status"}),(0,S.jsx)(x.A,{children:"Appointment(s)"}),(0,S.jsx)(x.A,{children:"Action"})]})}),(0,S.jsx)(u.A,{children:K.length>0?K.map(((e,l)=>{var s;return(0,S.jsxs)(h.A,{children:[(0,S.jsxs)(x.A,{className:"text-gray-500 flex flex-row font-semibold",children:[(0,S.jsx)(m.A,{src:null===e||void 0===e?void 0:e.profilePic,className:"mr-2 h-10 w-10"}),null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,S.jsx)(x.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.phoneNumber}),(0,S.jsx)(x.A,{className:"text-gray-500",children:null===e||void 0===e?void 0:e.email}),(0,S.jsx)(x.A,{className:null!==e&&void 0!==e&&e.status?"text-green-600 font-semibold":"text-red-600 font-semibold",children:null!==e&&void 0!==e&&e.status?"Active":"Blocked"}),(0,S.jsx)(x.A,{className:"text-gray-500",children:(null===(s=t[e.clientId])||void 0===s?void 0:s.length)||0}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(v.A,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:l=>((e,l)=>{U(e.currentTarget),Y(l)})(l,e),className:"bg-violet-500 hover:bg-green-900 text-white hover:text-white px-2 py-1 rounded",children:"Action"}),(0,S.jsxs)(f.A,{id:"simple-menu",anchorEl:T,keepMounted:!0,open:Boolean(T),onClose:X,className:"rounded",children:[(0,S.jsx)(b.A,{onClick:$,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(N.A,{className:"h-5 w-5 mr-2 text-red-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Block"})]})}),(0,S.jsx)(b.A,{onClick:z,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(C.A,{className:"h-5 w-5 mr-2 text-green-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Unblock"})]})}),(0,S.jsx)(b.A,{onClick:H,className:"bg-gray-200 m-1 rounded",children:(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)(k,{className:"h-5 w-5 mr-2 text-blue-600"}),(0,S.jsx)("p",{className:"font-semibold",children:"Switch"})]})})]})]})]},l)})):(0,S.jsx)(h.A,{children:(0,S.jsx)(x.A,{colSpan:6,children:(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center mt-10",children:[(0,S.jsx)(y.A,{className:"h-10",style:{color:"gray"}}),(0,S.jsx)("p",{className:"font-bold text-lg",children:"No client has registered yet"}),(0,S.jsx)(i.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no clients yet. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})})})]})}),(0,S.jsxs)(p.A,{className:"rounded-[20px]",open:M,onClose:()=>Z(!1),children:[(0,S.jsx)(g.A,{className:"font-bold text-sm",children:"Are you sure you want to block this Client ?"}),(0,S.jsx)(A.A,{children:(0,S.jsx)(i.A,{className:"text-gray-500 text-sm",children:"Client won't be able to access this platform with this email anymore. Remember to refresh page after!"})}),(0,S.jsxs)(j.A,{children:[(0,S.jsx)(v.A,{onClick:()=>Z(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(v.A,{onClick:async e=>{Z(!1),R(!0),e.preventDefault();try{await(0,w.nB)(null===F||void 0===F?void 0:F.clientId,!1),alert("Client has been successfully blocked!")}catch(l){console.error("Error blocking client:",l),alert("Error blocking client")}finally{R(!1)}},disabled:I,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:I?"Please wait...":"Confirm"})]})]}),(0,S.jsxs)(p.A,{className:"rounded-[20px]",open:P,onClose:()=>L(!1),children:[(0,S.jsx)(g.A,{className:"font-bold text-sm",children:"Are you sure you want to unblock this Client ?"}),(0,S.jsx)(A.A,{children:(0,S.jsx)(i.A,{className:"text-gray-500 text-sm",children:"Client will now be able to access this platform with this email \ud83c\udf8a. Remember to refresh page after!"})}),(0,S.jsxs)(j.A,{children:[(0,S.jsx)(v.A,{onClick:()=>L(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(v.A,{onClick:async e=>{L(!1),R(!0),e.preventDefault();try{await(0,w.nB)(null===F||void 0===F?void 0:F.clientId,!0),alert("Client has been successfully unblocked!")}catch(l){console.error("Error unblocking client:",l),alert("Error unblocking client")}finally{R(!1)}},disabled:I,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:I?"Please wait...":"Confirm"})]})]}),(0,S.jsxs)(p.A,{className:"rounded-[20px]",open:D,onClose:()=>O(!1),children:[(0,S.jsx)(g.A,{className:"font-bold text-sm",children:"Are you sure you want to switch this Client to Artisan ?"}),(0,S.jsx)(A.A,{children:(0,S.jsx)(i.A,{className:"text-gray-500 text-sm",children:"Client will now be made into an Artisan, thus could recieve bookings on this platform \ud83c\udf8a."})}),(0,S.jsxs)(j.A,{children:[(0,S.jsx)(v.A,{onClick:()=>O(!1),className:"w-full btn bg-gray-300 hover:bg-gray-500 hover:text-white text-black md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:"Cancel"}),(0,S.jsx)(v.A,{onClick:async e=>{O(!1),R(!0),e.preventDefault(),J((0,E.Wf)(null===F||void 0===F?void 0:F.clientId)),J((0,E.xI)(null===F||void 0===F?void 0:F.email)),J((0,E.q6)(null===F||void 0===F?void 0:F.firstName)),J((0,E.Gm)(null===F||void 0===F?void 0:F.lastName)),J((0,E.bC)("MTN")),J((0,E.Ys)(null===F||void 0===F?void 0:F.phoneNumber)),J((0,E.ku)(null===F||void 0===F?void 0:F.profilePic)),J((0,E.wO)(null===F||void 0===F?void 0:F.password)),J((0,E.Ur)(null===F||void 0===F?void 0:F.phoneNumber));try{await J((0,w.Do)(W)),alert("Client has been successfully switched to Artisan!")}catch(l){console.error("Error switching client to artisan:",l),alert("Error switching client to artisan, try again...")}finally{R(!1)}},disabled:I,className:"w-full btn bg-violet-600 text-white hover:bg-green-600 hover:text-white md:ml-4 font-semibold px-3 py-2 rounded-[10px] duration-500",children:I?"Please wait...":"Confirm"})]})]})]})}},6992:(e,l,t)=>{t.d(l,{A:()=>n});var s=t(9950);const n=s.forwardRef((function(e,l){let{title:t,titleId:n,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,s.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}))},2628:(e,l,t)=>{t.d(l,{A:()=>n});var s=t(9950);const n=s.forwardRef((function(e,l){let{title:t,titleId:n,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}))}}]);