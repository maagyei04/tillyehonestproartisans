"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[845],{5226:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var l=a(9950),t=a(1413),r=a(1032),i=a(300),o=a(5336),n=a(1845),d=a(6491),c=a(4414);const m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function u(){const e=(0,i.wA)(),[s,a]=(0,l.useState)(!1),{userLoggedIn:u,currentUser:x}=(0,r.A)(),[b,h]=(0,l.useState)(null),[p,g]=(0,l.useState)([]),[f,N]=(0,l.useState)([]),[j,y]=(0,l.useState)({firstName:!1,lastName:!1,email:!1,phoneNumber:!1}),[w,v]=(0,l.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",bio:"",businessField:"",businessLocation:"",passportImage:""}),[k,C]=(0,l.useState)({artisan_id:null===x||void 0===x?void 0:x.uid,title:"",image_url:""}),[I,P]=(0,l.useState)(null),[S,A]=(0,l.useState)(null),[L,E]=(0,l.useState)(null),[U,F]=(0,l.useState)(null),[G,_]=(0,l.useState)(null),[B,R]=(0,l.useState)(null),[D,O]=(0,l.useState)(!1),[T,Y]=(0,l.useState)(!1),[M,V]=(0,l.useState)(!1),H=()=>O(!1),Q=()=>Y(!1),q=()=>V(!1);(0,l.useEffect)((()=>{(async()=>{if(u&&null!==x&&void 0!==x&&x.uid){const e=await(0,o.VL)(x.uid);h(e),v({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phoneNumber:e.phoneNumber||"",passportImage:e.passportImage||"",businessField:e.businessField||"",businessLocation:e.businessLocation||"",bio:e.bio||""})}})(),(async()=>{if(u&&null!==x&&void 0!==x&&x.uid){const e=await(0,o.eO)(x.uid);g(e)}})(),(async()=>{try{const e=await(0,o.wV)();N(e)}catch(e){console.error("Error fetching categories:",e)}})()}),[u,x]);const z=e=>{const{name:s,value:a}=e.target;v((e=>({...e,[s]:a})))},J=e=>{y((s=>({...s,[e]:!s[e]})))},K=async s=>{a(!0),s.preventDefault();try{let s={...w};if(I){const a=await(0,o.vA)(x.uid,I,e);s.passportImage=a}await(0,o.AI)(x.uid,s),alert("Profile updated successfully")}catch(l){console.error("Error updating profile:",l),alert("Error updating profile")}finally{a(!1)}};return b?(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-2 md:p-6",children:[(0,c.jsx)("form",{onSubmit:K,children:(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow shadow-lg",children:[(0,c.jsx)("h1",{className:"text-lg font-bold mb-1",children:"Account Information"}),(0,c.jsx)("label",{htmlFor:"profile-upload",className:"font-semibold text-sm text-gray-500",children:"Upload Your Passport Picture (will be used as profile pic)"}),(0,c.jsx)("label",{children:(0,c.jsxs)("div",{className:"flex items-center mb-4 relative overflow-hidden cursor-pointer",children:[S?(0,c.jsx)(t.A,{src:S,className:"h-24 w-24 mr-4"}):(0,c.jsx)(t.A,{src:w.passportImage,className:"h-24 w-24 mr-4"}),(0,c.jsx)("input",{name:"profile-upload",type:"file",id:"profile-upload",className:"hidden",accept:"image/*",onChange:e=>{P(e.target.files[0]),A(URL.createObjectURL(e.target.files[0]))}})]})}),(0,c.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,c.jsxs)("div",{className:"mb-4 mr-2",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mr-2",children:"First Name"}),j.firstName?(0,c.jsx)("input",{type:"text",name:"firstName",value:w.firstName,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}):(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("p",{className:"text-gray-500 text-sm font-bold mr-5",children:w.firstName}),(0,c.jsx)("button",{onClick:()=>J("firstName"),className:"text-blue-600",children:"Edit"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),j.lastName?(0,c.jsx)("input",{type:"text",name:"lastName",value:w.lastName,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}):(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("p",{className:"text-gray-500 text-sm font-bold mr-5",children:w.lastName}),(0,c.jsx)("button",{onClick:()=>J("lastName"),className:"text-blue-600",children:"Edit"})]})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),j.email?(0,c.jsx)("input",{type:"email",name:"email",value:w.email,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}):(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("p",{className:"text-gray-500 text-sm font-bold",children:w.email}),(0,c.jsx)("button",{onClick:()=>J("email"),className:"text-blue-600",children:"Edit"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),j.phoneNumber?(0,c.jsx)("input",{type:"tel",name:"phoneNumber",value:w.phoneNumber,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}):(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("p",{className:"text-gray-500 text-sm font-bold",children:w.phoneNumber}),(0,c.jsx)("button",{onClick:()=>J("phoneNumber"),className:"text-blue-600",children:"Edit"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Biography"}),(0,c.jsx)("textarea",{name:"bio",value:w.bio,onChange:z,placeholder:w.bio?w.bio:"Talk about yourself and your work",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,c.jsxs)("button",{disabled:s,type:"submit",className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!s&&"Update Profile Info",s&&"Please wait..."]})]})}),(0,c.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow shadow-lg",children:(0,c.jsxs)("form",{onSubmit:async s=>{a(!0),s.preventDefault();try{let s={...k};if(L){const a=await(0,o.jp)(L,e);s.image_url=a}await e((0,o.IQ)(s)),alert("Portfolio added successfully")}catch(l){console.error("Error adding portfolio:",l),alert("Error adding portfolio")}finally{a(!1)}},children:[(0,c.jsx)("h1",{className:"text-lg font-bold mb-4",children:"Your Portfolio"}),(0,c.jsx)("div",{className:"portfolio-list mb-4",style:{maxHeight:"200px",overflowY:"auto"},children:p.map(((s,l)=>(0,c.jsx)("div",{className:"mb-4 flex-col justify-between items-center bg-gray-200 shadow shadow-lg p-4 rounded-[10px]",children:(0,c.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-black text-sm font-bold",children:s.title}),(0,c.jsx)("img",{src:s.image_url,height:50,width:50,alt:"portfolio"})]}),(0,c.jsx)("div",{className:"flex items-center space-x-2",children:(0,c.jsx)("div",{onClick:()=>(async s=>{a(!0);try{await e((0,o._s)(s)),alert("Portfolio deleted successfully")}catch(l){console.error("Error deleting portfolio:",l),alert("Error deleting portfolio")}finally{a(!1)}})(s.id),className:"text-red-600 cursor-pointer",children:(0,c.jsx)("i",{className:"material-icons",children:"delete"})})})]})},l)))}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,c.jsx)("input",{type:"title",name:"title",onChange:e=>{const{name:s,value:a}=e.target;C((e=>({...e,[s]:a})))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),(0,c.jsx)("input",{type:"file",name:"image_url",alt:"image_url",accept:"image/*",onChange:e=>{E(e.target.files[0]),F(URL.createObjectURL(e.target.files[0]))},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,c.jsxs)("button",{disabled:s,type:"submit",className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!s&&"Add To Portfolio",s&&"Please wait..."]})]})}),(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow shadow-lg",children:[(0,c.jsx)("h1",{className:"text-lg font-bold mb-2",children:"Payment Information"}),(0,c.jsx)("p",{className:"text-gray-500 font-bold text-sm mb-2",children:"Adding your mobile money details can help you autofill during the payment process"}),(0,c.jsx)("div",{className:"mb-4 flex-col justify-between items-center bg-gray-200 shadow shadow-lg p-4 rounded-[10px]",children:(0,c.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-black text-sm font-bold",children:[b.firstName," ",b.lastName]}),(0,c.jsxs)("p",{className:"text-gray-600",children:[b.momoNetwork," Mobile Money - ",b.momoNumber]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("button",{className:"text-blue-600",children:(0,c.jsx)("i",{className:"material-icons",children:"edit"})}),(0,c.jsx)("button",{className:"text-red-600",children:(0,c.jsx)("i",{className:"material-icons",children:"delete"})})]})]})})]}),(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow shadow-lg",children:[(0,c.jsx)("h1",{className:"text-lg font-bold mb-4",children:"Images"}),(0,c.jsxs)("ul",{className:"space-y-2",children:[(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:b.passportImage,className:"text-blue-600 hover:underline",onClick:e=>{e.preventDefault(),Y(!0)},children:"PassportPicture"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:b.ghanaCardImage,className:"text-blue-600 hover:underline",onClick:e=>{e.preventDefault(),V(!0)},children:"GhanaCard"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:b.gaurantorNoteImage,className:"text-blue-600 hover:underline",onClick:e=>{e.preventDefault(),O(!0)},children:"Guarantor note"})})]})]}),(0,c.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow shadow-lg",children:(0,c.jsxs)("form",{onSubmit:K,children:[(0,c.jsx)("h1",{className:"text-lg font-bold mb-4",children:"Business Info"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Update your Business field (Primary)"}),(0,c.jsx)("select",{name:"businessField",value:w.businessField,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:f.map(((e,s)=>(0,c.jsx)("option",{value:e,children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("div",{className:"w-4 h-4 rounded-full bg-".concat(s%3===0?"blue":s%3===1?"green":"yellow","-500")}),(0,c.jsx)("span",{children:e})]})},s)))})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Update your Business field (Secondary)"}),(0,c.jsx)("select",{name:"businessField",value:w.businessField,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:f.map(((e,s)=>(0,c.jsx)("option",{value:e,children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("div",{className:"w-4 h-4 rounded-full bg-".concat(s%3===0?"blue":s%3===1?"green":"yellow","-500")}),(0,c.jsx)("span",{children:e})]})},s)))})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Business Location"}),(0,c.jsx)("input",{type:"tel",name:"businessLocation",value:w.businessLocation,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,c.jsxs)("button",{disabled:s,type:"submit",className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!s&&"Update Business Info",s&&"Please wait..."]})]})}),(0,c.jsx)(n.A,{open:D,onClose:H,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,c.jsxs)(d.A,{sx:m,children:[(0,c.jsx)("h2",{id:"modal-title",className:"text-lg font-bold mb-4",children:"Guarantor Note"}),B?(0,c.jsx)("img",{src:B,alt:"Guarantor Note Preview",className:"w-full h-auto mb-4"}):(0,c.jsx)("img",{src:b.gaurantorNoteImage,alt:"Guarantor Note",className:"w-full h-auto mb-4"}),(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{_(e.target.files[0]),R(URL.createObjectURL(e.target.files[0]))},className:"mt-2 mb-4"}),(0,c.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,c.jsx)("button",{onClick:H,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",children:"Close"}),(0,c.jsx)("button",{onClick:async()=>{a(!0);try{if(G){const s=await(0,o.g4)(x.uid,G,e);h((e=>({...e,gaurantorNoteImage:s}))),R(null),_(null),alert("Guarantor note updated successfully"),H()}}catch(s){console.error("Error updating guarantor note image:",s),alert("Error updating guarantor note image")}finally{a(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded",children:s?"Please wait...":"Update"})]})]})}),(0,c.jsx)(n.A,{open:T,onClose:Q,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,c.jsxs)(d.A,{sx:m,children:[(0,c.jsx)("h2",{id:"modal-title",className:"text-lg font-bold mb-4",children:"Passport Image"}),(0,c.jsx)("img",{src:b.passportImage,alt:"Passport Preview",className:"w-full h-auto mb-4"}),(0,c.jsx)("div",{className:"flex justify-end space-x-2",children:(0,c.jsx)("button",{onClick:Q,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",children:"Close"})})]})}),(0,c.jsx)(n.A,{open:M,onClose:q,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,c.jsxs)(d.A,{sx:m,children:[(0,c.jsx)("h2",{id:"modal-title",className:"text-lg font-bold mb-4",children:"Ghana Card"}),(0,c.jsx)("img",{src:b.ghanaCardImage,alt:"Ghana Card Preview",className:"w-full h-auto mb-4"}),(0,c.jsx)("div",{className:"flex justify-end space-x-2",children:(0,c.jsx)("button",{onClick:q,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",children:"Close"})})]})})]}):(0,c.jsx)("div",{children:"Loading..."})}}}]);