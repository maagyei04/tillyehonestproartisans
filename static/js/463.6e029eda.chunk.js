"use strict";(self.webpackChunktillyehonestproartisans=self.webpackChunktillyehonestproartisans||[]).push([[463],{5463:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(9950),l=t(6491),n=t(899),i=t(2053),r=t(1413),o=t(8437),d=t(4142),c=t(4745),m=t(146),x=t(1959),h=t(5336),p=t(4414);const g=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)({bookingEstimateAmount:""});return 0===s.bookingEstimateAmount?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Estimate Details"}),(0,p.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,p.jsx)("p",{children:"Waiting for estimate"})}),(0,p.jsx)("div",{className:"flex flex-col mt-5",children:(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsx)(x.A,{className:"w-5 mr-5"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm",children:"Estimate will be forwarded to client immediately after creation by artisan"})]})})]})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)("h1",{className:"mb-2 text-lg font-bold",children:"Created Estimate"}),(0,p.jsx)("h1",{className:"mb-2 text-sm font-semibold mb-5",children:"Esimated Budget By Artisan"}),(0,p.jsxs)("div",{className:"mb-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Total Amount"}),(0,p.jsxs)("p",{children:["GHC ",s.bookingEstimateAmount,".00"]})]}),(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsx)(x.A,{className:"w-5 mr-5"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]})})]})})},b=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1);return"complete"!==s.bookingPayment?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,p.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,p.jsx)("p",{children:""===s.bookingPayment?"No Payment":"half"===s.bookingPayment?"70% Payment Made":""})}),(0,p.jsxs)("div",{className:"flex flex-row mb-2",children:["complete"!==s.bookingPayment&&"half"!==s.bookingPayment&&(0,p.jsxs)("button",{disabled:t,type:"submit",onClick:async e=>{l(!0),e.preventDefault();try{await(0,h.$E)(s.id,"half"),alert("Appointment Payment Status updated successfully")}catch(t){console.error("Error updating appointment payment status:",t),alert("Error updating appointment payment status")}finally{l(!1)}},className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Mark as 70% Paid",t&&"Please wait..."]}),"half"===s.bookingPayment&&(0,p.jsxs)("button",{disabled:t,type:"submit",onClick:async e=>{l(!0),e.preventDefault();try{await(0,h.$E)(s.id,"complete"),alert("Appointment Payment Status updated successfully")}catch(t){console.error("Error updating appointment payment status:",t),alert("Error updating appointment payment status")}finally{l(!1)}},className:"w-full bg-purple-600 hover:bg-green-600 text-white py-2 rounded-md",children:[!t&&"Full Payment",t&&"Please wait..."]})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,p.jsx)("p",{children:0===s.bookingEstimateAmount?"Estimate yet to be created":"GHC "+s.bookingEstimateAmount+".00"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Artisan's Share"}),(0,p.jsx)("p",{children:"90% of total Amount Charged"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Management Fee"}),(0,p.jsx)("p",{children:"10% of total Amount Charged"})]}),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsx)(x.A,{className:"w-5 mr-5"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has received the estimate and is expected to make payment"})]}),(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsx)(x.A,{className:"w-5 mr-5"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm",children:"Mark payment as 70% or full payment, after you've recieved payment from client."})]})]})]})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)("h1",{className:"mb-2 text-sm font-bold mb-1",children:"Payment Information"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:"Status"}),(0,p.jsx)("div",{className:"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5",children:(0,p.jsx)("p",{children:"complete"===s.bookingPayment?"Full Payment Has Been Made":"half"===s.bookingPayment?"70% Payment":""})}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Total Amount Charged"}),(0,p.jsx)("p",{children:0===s.bookingEstimateAmount?"Estimate yet to be created":"GHC "+s.bookingEstimateAmount+".00"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Artisan's Share"}),(0,p.jsx)("p",{children:"90% of total Amount Charged"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Management Fee"}),(0,p.jsx)("p",{children:"10% of total Amount Charged"})]}),(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsx)(x.A,{className:"w-5 mr-5"}),(0,p.jsx)("p",{className:"text-gray-500 text-sm",children:"Client has made payment"})]})})]})})},j=e=>{let{bookingData:s}=e;const[t,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1);return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Artisan Work Update"}),(0,p.jsx)("div",{className:"complete"===s.bookingStatusArtisan?"bg-green-100 text-green-600 px-4 rounded-[10px] mb-2":"bg-red-100 text-red-600 px-4 rounded-[10px] mb-2",children:(0,p.jsx)("p",{children:"complete"===s.bookingStatusArtisan?"Artisan has completed Work!":"Artisan hasn't completed work yet"})}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-sm text-gray-500",children:"Artisan's Work Review"}),(0,p.jsx)("p",{children:"complete"===s.bookingStatusClient?s.bookingReview:"Client yet to drop a review for Artisan"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("p",{className:"text-sm text-gray-500",children:"Artisan's Review Start"}),(0,p.jsx)("p",{children:"complete"===s.bookingStatusClient?s.bookingRate+" stars":"Client hasn't giving you any stars yet..."})]}),(0,p.jsx)("h1",{className:"mb-2 text-sm font-bold",children:"Client Work Update"}),(0,p.jsx)("div",{className:"complete"===s.bookingStatusClient?"bg-green-100 text-green-600 px-4 rounded-[10px] mb-5":"bg-red-100 text-red-600 px-4 rounded-[10px] mb-5",children:(0,p.jsx)("p",{children:"complete"===s.bookingStatusClient?"Client has approved the work!":"Waiting for confirmation from client"})}),(0,p.jsx)("div",{children:(0,p.jsx)("p",{className:"text-sm text-gray-500",children:"In case the client is taking too long to verify the work, contact client"})})]})})};var u=t(9818);const N=(0,m.A)(l.A)({backgroundColor:"#f9f9f9",padding:"8px",borderRight:"1px solid #ddd",height:"auto"}),f=(0,m.A)(l.A)({padding:"5px",height:"100vh",overflowY:"auto"});function y(){const[e,s]=(0,a.useState)(null),[t,m]=(0,a.useState)(0),[x,y]=(0,a.useState)([]),[v,k]=(0,a.useState)({}),[w,A]=(0,a.useState)({});(0,a.useEffect)((()=>{(async()=>{const e=await(0,h.WT)();y(e),console.log(e)})()}),[]);return(0,a.useEffect)((()=>{(async()=>{const e={};for(const s of x)if(!e[s.bookingClientId]){const t=await(0,h.Se)(s.bookingClientId);e[s.bookingClientId]={firstName:t.firstName,lastName:t.lastName,profilePic:t.profilePic,email:t.email,phoneNumber:t.phoneNumber}}k(e)})(),(async()=>{const e={};for(const s of x)if(!e[s.bookingArtisanId]){const t=await(0,h.VL)(s.bookingArtisanId);e[s.bookingArtisanId]={firstName:t.firstName,lastName:t.lastName,passportImage:t.passportImage,email:t.email,phoneNumber:t.phoneNumber}}A(e)})()}),[x]),(0,p.jsxs)(n.Ay,{container:!0,children:[(0,p.jsx)(n.Ay,{item:!0,xs:12,md:4,children:(0,p.jsxs)(N,{children:[(0,p.jsx)(i.A,{className:"text-lg font-bold",gutterBottom:!0,children:"Active Appointments"}),(0,p.jsx)("input",{className:"bg-white rounded-[10px] shadow shadow-lg w-full p-1 mb-5",placeholder:"Search Appointments..."}),(0,p.jsx)("div",{children:x.length>0?x.map(((t,a)=>(0,p.jsx)("div",{button:!0,onClick:()=>{s(t)},selected:e===t,sx:{mb:2},children:(0,p.jsxs)("div",{className:"".concat(e===t?"border border-violet-600":"border border-gray-200"," flex flex-col mb-2 p-4 shadow shadow-lg rounded-[10px] bg-white"),children:[v[t.bookingClientId]?(0,p.jsxs)("div",{className:"flex flex-row justify-between mb-5",children:[(0,p.jsxs)("div",{className:"flex flex-row items-cente",children:[(0,p.jsx)(r.A,{src:v[t.bookingClientId].profilePic,className:"h-5 w-5 mr-2"}),(0,p.jsxs)("p",{className:"text-sm",children:[v[t.bookingClientId].firstName," ",v[t.bookingClientId].lastName]})]}),(0,p.jsx)("div",{className:"".concat(0===t.bookingEstimateAmount?"bg-red-100 text-red-600":"bg-gray-200 text-green-500"," px-4 rounded-[10px]"),children:0===t.bookingEstimateAmount?"Pending":"Estimate Done"})]}):(0,p.jsx)("p",{children:"Loading client details..."}),(0,p.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col truncate w-2/4",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Job Description"}),(0,p.jsx)("p",{className:"",children:t.bookingServiceDetail})]}),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Expected Date"}),t.bookingStartDate]})]})]})},a))):(0,p.jsxs)(l.A,{className:"flex flex-col items-center justify-center mt-10",children:[(0,p.jsx)(u.A,{className:"h-20",style:{color:"gray"}}),(0,p.jsx)("p",{className:"font-bold text-lg",children:"You\u2019ve not been booked yet"}),(0,p.jsx)(i.A,{className:"text-gray-500 mt-2 text-center px-2 md:px-20",children:"You're all set! There are currently no booked appointments for you. Enjoy your free time or use it to tackle your next task with peace of mind."})]})})]})}),(0,p.jsx)(n.Ay,{item:!0,xs:12,md:8,children:(0,p.jsx)(f,{children:e?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row items-center",children:[(0,p.jsx)(i.A,{className:"text-sm font-bold mr-2",gutterBottom:!0,children:"Appointment Details"}),(0,p.jsx)("div",{className:"bg-red-100 text-red-600 px-4 rounded-[10px]",children:(0,p.jsx)("p",{children:0===e.bookingEstimateAmount?"Waiting for estimate":"Estimate Done"})})]}),(0,p.jsxs)(o.A,{value:t,onChange:(e,s)=>{m(s)},children:[(0,p.jsx)(d.A,{label:"General"}),(0,p.jsx)(d.A,{label:"Estimate"}),(0,p.jsx)(d.A,{label:"Payment"}),(0,p.jsx)(d.A,{label:"Completion"})]}),(0,p.jsxs)(l.A,{p:2,children:[0===t&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white shadow shadow-lg p-5 rounded-[10px]",children:[(0,p.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Client Information"}),(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsx)("div",{className:"mr-2",children:(0,p.jsx)(r.A,{className:"h-10 w-10 mr-2",src:v[e.bookingClientId].profilePic})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{className:"text-sm",children:[v[e.bookingClientId].firstName," ",v[e.bookingClientId].lastName]}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:v[e.bookingClientId].phoneNumber})]})]}),(0,p.jsx)(c.A,{sx:{my:2}}),(0,p.jsx)("div",{className:"flex flex-col mb-2",children:(0,p.jsx)("p",{className:"text-gray-500",children:"Artisan"})}),w[e.bookingArtisanId]?(0,p.jsxs)("div",{className:"flex flex-row mb-3",children:[(0,p.jsx)(r.A,{className:"h-10 w-10",src:w[e.bookingArtisanId].passportImage}),(0,p.jsxs)("div",{className:"flex flex-col mb-2 ml-2",children:[(0,p.jsxs)("p",{className:"text-sm font-semibold",children:[w[e.bookingArtisanId].firstName," ",w[e.bookingArtisanId].lastName]}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:w[e.bookingArtisanId].email}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:w[e.bookingArtisanId].phoneNumber})]})]}):(0,p.jsx)("p",{children:"Loading artisan details..."}),(0,p.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Service Details"}),(0,p.jsx)(i.A,{variant:"body2",children:"Problem Statement"}),(0,p.jsx)("span",{className:"text-sm text-gray-500",children:(0,p.jsx)("textarea",{contentEditable:"false",value:e.bookingServiceDetail,rows:4,className:"w-full"})}),(0,p.jsx)(c.A,{sx:{my:2}}),(0,p.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Date And Time"}),(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsxs)("div",{className:"mr-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Estimated Date"}),(0,p.jsx)("p",{children:e.bookingStartDate})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Time"}),(0,p.jsx)("p",{children:e.bookingStartTime})]})]}),(0,p.jsx)(c.A,{sx:{my:2}}),(0,p.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Work Location Information"}),(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsxs)("div",{className:"mr-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Digital Address:"}),(0,p.jsx)("p",{children:e.bookingDigitalAddress})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-500",children:"House Number:"}),(0,p.jsx)("p",{children:e.bookingHouseNumber})]})]}),(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsxs)("div",{className:"mr-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"City/Town:"}),(0,p.jsx)("p",{children:e.bookingTown})]}),(0,p.jsxs)("div",{className:"mr-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Region:"}),(0,p.jsx)("p",{children:e.bookingRegion})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Country:"}),(0,p.jsx)("p",{children:e.bookingCountry})]})]}),(0,p.jsxs)("div",{className:"flex flex-row mb-5",children:[(0,p.jsxs)("div",{className:"mr-10",children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Neighborhood / Community:"}),(0,p.jsx)("p",{children:e.bookingCommunity})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Closest Landmark:"}),(0,p.jsx)("p",{children:e.bookingLandmark})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-500",children:"Extra Information about Location"}),(0,p.jsx)("span",{className:"text-sm",children:(0,p.jsx)("textarea",{contentEditable:"false",value:e.bookingLocationInfo,rows:4,className:"w-full"})})]})]})}),1===t&&(0,p.jsx)(g,{bookingData:e}),2===t&&(0,p.jsx)(b,{bookingData:e}),3===t&&(0,p.jsx)(j,{bookingData:e})]})]}):(0,p.jsx)(i.A,{variant:"h6",color:"textSecondary",children:"Please select an appointment to view details."})})})]})}}}]);